<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.2.1385" />
    <meta name="TEMPLATEBASE" content="mgc_ww_v2.1.078" />
    <meta name="LASTUPDATED" content="Tue Nov 27 10:02:48 2012" />
    <meta name="mgc_html_doctitle" content="Vista User's Manual" />
    <title>Additions to main.cpp When Using ARM-FM</title>
<!-- Search Engine keywords -->
    <meta name="attributes" content=" doc.type.documentation.user,doc.type.documentation.ref,product.version.v3.5,product.name.vista"/>
<!-- JavaScript Files -->
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/file_list.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/breadcrumbs.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/docvars.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/topics.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhelp/wwhimpl/common/scripts/popup_window.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
      // Set reference to top level help frame
      //
      if (( window.name != "SearchTopic") && ( window.name != "PopupTopic"))
      {   var  WWHFrame = WWHGetWWHFrame(  ""); }
      else
      { var WWHFrame = eval("parent.parent"); }
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
    var  WWHFrame = eval("parent.parent");
	document.write(MGCGetInternalStyleSheet(1));
	document.write(MGCGetDocumentStyleSheet(0));
	document.write(MGCGetPGFStyleSheet(0));
    // -->
    </script>
  </head>


<body class="body" rightmargin="25" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">





 <script type="text/javascript" language="JavaScript1.2">
    <!--
      MGCInsertRTHeader(202);
    // -->
 </script>
 

<!--154,198,202-->
<!--EnDhEaDeR-->

<a name="MGCCIDPAdditions to main.cpp When Using ARM-FM"></a>

<a name="wp171718"></a><h4 class="pHeading3">
  


Additions to main.cpp When Using ARM-FM
  </h4>


<!--AdditionstomaincppWhenUsingARMFM-->


<a name="wp171720"></a><p class="pBody">
When ARM-FM models are used, the following should be added to <span style=" font-style: italic;">main.cpp</span>:
</p>


<a name="wp171722"></a>
<ul><li class="LL1BulSolid">Add include file: #include &quot;<span style=" font-style: italic;">mb/arm_fm/simcontroller.h</span>&quot;</li></ul>
<a name="wp171723"></a>
<ul><li class="LL1BulSolid">Before call to scx_initialize(), add code:  </li></ul>
<a name="wp171774"></a><pre class="pCodeIndent">
           mb::arm_fm::simcontroller <span class="cReqRpl">some_name</span>;</pre>

<a name="wp171781"></a><pre class="pCodeIndent">
           </pre>

<a name="wp171724"></a>
<ul><li class="LL1BulSolid">Add second parameter to scx_initialize: </li></ul>
<a name="wp171782"></a><pre class="pCodeIndent">
           scx::scx_initialize(&quot;Platform&quot;, &amp;<span class="cReqRpl">some_name</span>);</pre>

<a name="wp171789"></a><pre class="pCodeIndent">
           </pre>
<a name="MGCCIDPCortex-M3 With Bus Matrix"></a>

<a name="wp100668"></a><h4 class="pHeading3NoSplit">
  


Cortex-M3 With Bus Matrix
</h4>



<a name="wp136989"></a><p class="pBody">
This model is a special version of the AFM CortexM3CT model and includes an internal BUS matrix implementation. The Cortex-M3 with Bus Matrix can be found at: <span style=" font-style: italic;">GenericLibrary/ARM_FastModels/ARMCortexM3.</span>
</p>

<a name="MGCCIDPGeneration Parameters (Generics)"></a>

<a name="wp100669"></a><h6 class="pHeading5">
  


Generation Parameters (Generics)
</h6>



<a name="wp137023"></a>
<ul><li class="LL1BulSolid">NUM_IRQ [default 8] &#151;  Number of NVIC input lines</li></ul>
<a name="wp137028"></a>
<ul><li class="LL1BulSolid">BITNESS [default 32] &#151; Default AHB and APB bitness</li></ul>
<a name="wp137029"></a>
<ul><li class="LL1BulSolid">MASTER_PROTOCOL &#151;  Default master bus protocol name (for example, ahb_master or axi)</li></ul>
<a name="wp137030"></a>
<ul><li class="LL1BulSolid">SLAVE_PROTOCOL &#151;  Default slave bus protocol name (for example, ahb_slave or axi)</li></ul>
<a name="wp137024"></a>
<ul><li class="LL1BulSolid">USE_EVS_MI [default 1] &#151;  Indicates whether or not to use the MI (Multiple EVS Instantiation API) style</li></ul><a name="MGCCIDPInterface Ports"></a>

<a name="wp100672"></a><h6 class="pHeading5">
  


Interface Ports
</h6>



<a name="wp137056"></a>
<ul><li class="LL1BulSolid">icode_m &#151;  Instruction AHB port</li></ul>
<a name="wp137057"></a>
<ul><li class="LL1BulSolid">dcode_m &#151;  Data AHB port</li></ul>
<a name="wp137058"></a>
<ul><li class="LL1BulSolid">systeme_m &#151;  System AHB port</li></ul>
<a name="wp137059"></a>
<ul><li class="LL1BulSolid">pv_ppbus_m &#151;  APB bus master port</li></ul>
<a name="wp137060"></a>
<ul><li class="LL1BulSolid">poreset &#151;  Power On reset signal</li></ul>
<a name="wp137061"></a>
<ul><li class="LL1BulSolid">sysreset &#151;  System reset signal</li></ul>
<a name="wp137062"></a>
<ul><li class="LL1BulSolid">sysresetreq &#151;  System reset request signal.</li></ul>
<a name="wp137063"></a>
<ul><li class="LL1BulSolid">intnmi &#151;  Non Maskable interrupt signal</li></ul>
<a name="wp137064"></a>
<ul><li class="LL1BulSolid">intisr0 &#151;  intisr240 - NVIC input lines</li></ul>
<a name="wp137065"></a><p class="pBody">
Other AFM signal ports are also available.
</p>

<a name="MGCCIDPCPU Specific Parameters"></a>

<a name="wp100717"></a><h5 class="pHeading4">
  


CPU Specific Parameters
</h5>



<a name="wp100718"></a><p class="pBody">
<span style=" font-style: italic;">instruction_latency</span> &#151;  CPU unit delay; each instruction takes this amount of SystemC time
</p>


<a name="wp100719"></a><p class="pBody">
<span style=" font-style: italic;">instruction_energy</span> &#151;  When power is modeled, each instruction consumes the specified amount of energy
</p>


<a name="wp137127"></a><p class="pBody">
All other AFM specific parameters are also available as parameters in the parameter file.
</p>


<a name="wp137128"></a><p class="pBody">
Example:
</p>


<a name="wp137129"></a><pre class="pCode">     top_inst.cpu_inst.NUM_IRQ = 32</pre>


<a name="wp137125"></a><pre class="pCode">     </pre>




<script type="text/javascript" language="JavaScript1.2">
<!--
   PageTitle = "Additions to main.cpp When Using ARM\-FM";
   PDFLinkTitle = "Additions.to.main.cpp.When.Using.ARMFM"
   ThisTopic = "CortexM399CPUSpecificParameters";
   CurrentFile = "Chapter_Customizing_Gen_Models_new49.html";
   MGCSetDocumentVariables();
   MGCUpdateNavPane();
      MGCInsertRTFooter();
 // -->
 </script>



  </body>
</html>
