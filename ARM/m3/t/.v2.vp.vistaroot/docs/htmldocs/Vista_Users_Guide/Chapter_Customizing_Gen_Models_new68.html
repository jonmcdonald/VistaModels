<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.2.1385" />
    <meta name="TEMPLATEBASE" content="mgc_ww_v2.1.078" />
    <meta name="LASTUPDATED" content="Tue Nov 27 10:02:48 2012" />
    <meta name="mgc_html_doctitle" content="Vista User's Manual" />
    <title>Registers Class</title>
<!-- Search Engine keywords -->
    <meta name="attributes" content=" doc.type.documentation.user,doc.type.documentation.ref,product.version.v3.5,product.name.vista"/>
<!-- JavaScript Files -->
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/file_list.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/breadcrumbs.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/docvars.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/topics.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhelp/wwhimpl/common/scripts/popup_window.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
      // Set reference to top level help frame
      //
      if (( window.name != "SearchTopic") && ( window.name != "PopupTopic"))
      {   var  WWHFrame = WWHGetWWHFrame(  ""); }
      else
      { var WWHFrame = eval("parent.parent"); }
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
    var  WWHFrame = eval("parent.parent");
	document.write(MGCGetInternalStyleSheet(1));
	document.write(MGCGetDocumentStyleSheet(0));
	document.write(MGCGetPGFStyleSheet(0));
    // -->
    </script>
  </head>


<body class="body" rightmargin="25" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">





 <script type="text/javascript" language="JavaScript1.2">
    <!--
      MGCInsertRTHeader(221);
    // -->
 </script>
 

<!--154,214,221-->
<!--EnDhEaDeR-->

<a name="MGCCIDPRegisters Class"></a>

<a name="wp17966"></a><h4 class="pHeading3">
  


Registers Class
  </h4>


<!--RegistersClass-->


<a name="wp17967"></a><p class="pBody">
When registers have been defined in a component, a class, which enables the components to read and/or write to the registers, is created.
</p>


<a name="wp137406"></a><p class="pBody">
For example, if you have a component called DMA, the following class is generated:
</p>


<a name="wp137409"></a><pre class="pCode">     template &lt;typename TRANS = tlm::tlm_generic_payload&gt;</pre>


<a name="wp137410"></a><pre class="pCode">     class DMA_RemoteRegisters {</pre>


<a name="wp137411"></a><pre class="pCode">     &#0133;</pre>


<a name="wp137412"></a><pre class="pCode">     };</pre>


<a name="wp137404"></a><pre class="pCode">     </pre>


<a name="wp17968"></a><p class="pBody">
Use of this feature entails two steps: 
</p>


<a name="wp17969"></a>
<ol start="1."><li class="LL1Seq">Include the header file of the registers class created for the component in the header file of the component that uses the registers; for the DMA component, it is <span style=" font-style: italic;">DMA_model.h</span>.</li></ol>
<a name="wp137439"></a>
<ol start="2."><li class="LL1Seq">Create an object of the registers class; for the DMA component, the following object is created:</li></ol>
<a name="wp137440"></a><pre class="pCode">          DMA_RemoteRegisters&lt;&gt; dma (master, 0x0);</pre>


<a name="wp137455"></a><pre class="pCode">     </pre>


<a name="wp137441"></a><p class="pL1Body">where:</p>

<a name="wp137442"></a><p class="pL2Body">&ldquo;dma: &#151;  is a new object created to facilitate the use of the registers</p>

<a name="wp137443"></a><p class="pL2Body">&ldquo;master: &#151;  is the master port of the component that uses the registers</p>

<a name="wp137444"></a><p class="pL2Body">&ldquo;0x0: &#151;  is the base address of the component with the registers, in the memory map</p>

<a name="wp17979"></a><p class="pBody">
The methods of the new object can be used as follows:
</p>


<a name="wp17980"></a><pre class="pCode">     cout &lt;&lt; &quot; Writing DMA Source=0x&quot; &lt;&lt; hex &lt;&lt; 0x20 &lt;&lt; endl;</pre>


<a name="wp17981"></a><pre class="pCode">     dma.m_Source = 0x20;</pre>


<a name="wp17982"></a><pre class="pCode">     cout &lt;&lt; &quot; Writing DMA Destination=0x&quot; &lt;&lt; hex &lt;&lt; 0x30 &lt;&lt; endl;</pre>


<a name="wp17983"></a><pre class="pCode">     dma.m_Destination = 0x30;</pre>


<a name="wp17984"></a><pre class="pCode">     cout &lt;&lt; &quot; Writing DMA Size=&quot; &lt;&lt; dec &lt;&lt; Size &lt;&lt; endl;</pre>


<a name="wp17985"></a><pre class="pCode">     dma.m_Size = Size;</pre>


<a name="wp17986"></a><pre class="pCode">     cout &lt;&lt; &quot; Writing DMA Trigger&quot; &lt;&lt; endl;</pre>


<a name="wp166006"></a><pre class="pCode">     dma.m_Trigger = 0;<br />     cout &lt;&lt; &quot; Reading DMA Source&quot; &lt;&lt; endl;</pre>


<a name="wp166007"></a><pre class="pCode">     unsigned Source_value = dma.m_Source;</pre>


<a name="wp166008"></a><pre class="pCode">     </pre>


<a name="wp166009"></a><pre class="pCode">     // doing a write with transport_dbg</pre>


<a name="wp166010"></a><pre class="pCode">     dma.m_Source.write_dbg(0x20);</pre>


<a name="wp166011"></a><pre class="pCode">     // doing a read with transport_dbg</pre>


<a name="wp166012"></a><pre class="pCode">     Source_value = dma.m_Source.read_dbg();</pre>


<a name="wp18105"></a><pre class="pCode">     </pre>


<a name="wp17988"></a><p class="pBody">
See the tutorial examples at <span style=" font-style: italic;">/tutorial/examples/example01</span> for further details.
</p>




<script type="text/javascript" language="JavaScript1.2">
<!--
   PageTitle = "Registers Class";
   PDFLinkTitle = "Registers.Class"
   ThisTopic = "RegistersClass";
   CurrentFile = "Chapter_Customizing_Gen_Models_new68.html";
   MGCSetDocumentVariables();
   MGCUpdateNavPane();
      MGCInsertRTFooter();
 // -->
 </script>



  </body>
</html>
