<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.2.1385" />
    <meta name="TEMPLATEBASE" content="mgc_ww_v2.1.078" />
    <meta name="LASTUPDATED" content="Tue Nov 27 10:01:17 2012" />
    <meta name="mgc_html_doctitle" content="Vista User's Manual" />
    <title>Extracting Power &#151;  State Based Method</title>
<!-- Search Engine keywords -->
    <meta name="attributes" content=" doc.type.documentation.user,doc.type.documentation.ref,product.version.v3.5,product.name.vista"/>
<!-- JavaScript Files -->
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/file_list.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/breadcrumbs.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/docvars.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/topics.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhelp/wwhimpl/common/scripts/popup_window.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
      // Set reference to top level help frame
      //
      if (( window.name != "SearchTopic") && ( window.name != "PopupTopic"))
      {   var  WWHFrame = WWHGetWWHFrame(  ""); }
      else
      { var WWHFrame = eval("parent.parent"); }
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
    var  WWHFrame = eval("parent.parent");
	document.write(MGCGetInternalStyleSheet(1));
	document.write(MGCGetDocumentStyleSheet(0));
	document.write(MGCGetPGFStyleSheet(0));
    // -->
    </script>
  </head>


<body class="body" rightmargin="25" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">





 <script type="text/javascript" language="JavaScript1.2">
    <!--
      MGCInsertRTHeader(136);
    // -->
 </script>
 

<!--96,134,136-->
<!--EnDhEaDeR-->

<a name="MGCCIDPExtracting Power &#151;  State Based Method"></a>

<a name="wp99281"></a><h4 class="pHeading3">
  


Extracting Power &#151;  State Based Method
  </h4>


<!--ExtractingPower151StateBasedMethod-->

<a name="MGCCIDPPre-requisite"></a>

<a name="wp99282"></a><h5 class="pHeading4">
  


Pre-requisite
</h5>



<a name="wp99283"></a>
<ol start="1."><li class="LL1Seq">Prepare test benches for the HDL design (exhaustively covering legal scenarios). </li></ol>
<a name="wp99284"></a>
<ol start="2."><li class="LL1Seq">Simulate the design with the test benches and run a power extraction tool (either a commercial tool or in-house technology). Generate the following files: </li></ol>
<a name="wp99285"></a><ul><li class="LL2BulHollow">A vcd formatted file that includes dumps of the interface and state signal changes from the testbenches.</li></ul>
<a name="wp99286"></a><ol start="1."><li class="LL2Seq">A power graph file that includes the power changes, by time, consumed by the model. Such a file should be produced by the power extraction tool. Vista currently supports the following format for the power dump file:</li></ol>
<a name="wp99287"></a><pre class="pCodeIndent">
           <span class="cReqRpl">time</span> <span class="cReqRpl">power</span></pre>

<a name="wp99356"></a><pre class="pCodeIndent">
           </pre>

<a name="wp99288"></a><p class="pL2Body">Where:</p>

<a name="wp99389"></a><p class="pL2Body"><span class="cReqRpl">time</span> is a whole number that expresses the time in current simulation units (according to the VCD file).</p>

<a name="wp99391"></a><p class="pL2Body"><span class="cReqRpl">power</span> is a float number that expresses the power consumption at the given time, in mW.</p>

<a name="wp99289"></a>
<ol start="3."><li class="LL1Seq">Get leakage power value from the power extraction tool.</li></ol><a name="MGCCIDPModeling"></a>

<a name="wp99421"></a><h5 class="pHeading4">
  


Modeling
</h5>



<a name="wp99422"></a>
<ol start="1."><li class="LL1Seq">Create a functional model with timing (TLM or any SystemC) or load an existing model.</li></ol>
<a name="wp99423"></a><p class="pBody">
<span style=" font-weight: bold;">	For TLM model</span>:
</p>


<a name="wp99424"></a><ol start="1."><li class="LL2Seq">Associate the HDL functional model interface ports to the TLM model sockets based on a common protocol they both need to share. (See &ldquo;<a href='javascript:oT("CRF","Chapter_Modeling_Phase41.html#wp100080");'>Specifying or Modifying HDL Signal Association</a>&rdquo;).</li></ol>
<a name="wp99425"></a><ol start="2."><li class="LL2Seq">Associate the timing policies.</li></ol>
<a name="wp99426"></a><ol start="3."><li class="LL2Seq">Create state variables (Vista MB Variables) that correspond to the state signals in the VCD file.</li></ol>
<a name="wp99427"></a><ol start="4."><li class="LL2Seq">In a Tcl script file (for example: <span style=" font-style: italic;">var_assoc.tcl</span>) associate the model state variables with the HDL (VCD) signals and include the VCD hierarchical path (for example: <span style=" font-style: italic;">top.d.go</span>) </li></ol>
<a name="wp99428"></a><ol start="5."><li class="LL2Seq">Declare and assign the state variables in the PV user code corresponding to the HDL behavior.</li></ol>
<a name="wp99429"></a><ol start="6."><li class="LL2Seq">Set the leakage power in the model dialog T tab.</li></ol>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="0" width="80%" align="center">
  <tr valign="baseline">
    <td width="50" valign="top" background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg">&#160;</td>
    <td background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg"><span class="cNotesBlack">Note</span></td>
  </tr>
  <tr valign="top">
    <td width="50" valign="top"><img src="wwhelp/wwhimpl/common/images/nicon_note.jpg" /></td>
    <td valign="top">
            
<a name="wp99430"></a><p class="pnoteNote">
        	Most of these steps can be scripted, refer to &ldquo;<a href='javascript:oT("CRF","Chapter_Command_Line_Ops_mb01.html");'>Batch and Command-Line Options</a>&rdquo; and the examples provided in this section.
        </p>

          </td>
  </tr>
  <tr height="2">
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="left" /></td>
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="right" /></td>
    </tr>
 </table>
<a name="wp99545"></a><p class="pBody">
<span style=" font-weight: bold;">	For non-TLM state-based power-learned model</span>:
</p>


<a name="wp99546"></a><ol start="1."><li class="LL2Seq">Create state variables in the functional model that correspond to the state signals in the VCD file.</li></ol>
<a name="wp99547"></a><ol start="2."><li class="LL2Seq">Declare and assign the state variables in the functional model corresponding to the HDL behavior.</li></ol>
<a name="wp99548"></a><ol start="3."><li class="LL2Seq">Specify Power Model API in the functional (non-TLM) model. (see &ldquo;<a href='javascript:oT("CRF","Chapter_Modeling_Phase41.html#wp99677");'>Declare Power Model API and State Variables in Non-TLM Model State Based Power Learning</a>&rdquo;).</li></ol>
<a name="wp99549"></a><p class="pL2Body">Associate functional model state variables with the HDL (VCD) signals (include VCD hierarchical path; for example, top.d.go) in a tcl script file (for example, var_assoc.tcl)</p>
<a name="MGCCIDPDeclare Power Model API and State Variables in Non-TLM Model State Based Power Learning"></a>

<a name="wp99677"></a><h5 class="pHeading4">
  


Declare Power Model API and State Variables in Non-TLM Model State Based Power Learning
</h5>



<a name="wp99678"></a><p class="pBody">
All Power Model API code can be specified under the define macro POWER MODEL. The functional model header file includes the Power Model header (<span class="cReqRpl">model_name</span>_ <span style=" font-style: italic;">power_model.h) </span>and the Vista model builder generic header (<span style=" font-style: italic;">model_builder.h</span>).
</p>


<a name="wp99679"></a><p class="pBody">
The following example shows the functional model header file for a DMA model:
</p>


<a name="wp99680"></a><pre class="pCode">     #ifdef POWER_MODEL</pre>


<a name="wp99681"></a><pre class="pCode">        #include &quot;DMA_power_model.h&quot;</pre>


<a name="wp99682"></a><pre class="pCode">        #include &quot;model_builder.h&quot;</pre>


<a name="wp99683"></a><pre class="pCode">     #endif</pre>


<a name="wp99788"></a><pre class="pCode">     </pre>


<a name="wp99685"></a><p class="pBody">
Inside the SC_MODULE declaration:
</p>


<a name="wp99686"></a>
<ol start="1."><li class="LL1Seq">Declare each state variable using the special power template pm_object:</li></ol>
<a name="wp99687"></a><pre class="pCode">     pm_object  &lt;&lt;variable type&gt;&gt;</pre>


<a name="wp99801"></a><pre class="pCode">     </pre>


<a name="wp99688"></a>
<ol start="2."><li class="LL1Seq">Declare 1 common object: </li></ol>
<a name="wp99689"></a><pre class="pCode">     <span class="cReqRpl">model_name</span>_power_model <span class="cReqRpl">model_name</span>_pm;</pre>


<a name="wp99821"></a><pre class="pCode">     </pre>


<a name="wp99690"></a><p class="pBody">
The state variable is handled in the constructor of the SystemC module, for example, for the DMA model example, in the SC_MODULE declaration:
</p>


<a name="wp99692"></a><pre class="pCode">     #ifdef POWER_MODEL</pre>


<a name="wp99693"></a><pre class="pCode">        // create the required variable(s)</pre>


<a name="wp99694"></a><pre class="pCode">        pm_object&lt;bool&gt; GO;</pre>


<a name="wp99695"></a><pre class="pCode">        // instantiate the power model</pre>


<a name="wp99696"></a><pre class="pCode">        DMA_power_model DMA_pm;</pre>


<a name="wp99697"></a><pre class="pCode">     #else</pre>


<a name="wp99698"></a><pre class="pCode">        bool GO;</pre>


<a name="wp99699"></a><pre class="pCode">     #endif</pre>


<a name="wp99700"></a><pre class="pCode">     </pre>


<a name="wp99701"></a><pre class="pCode">     Note: &quot;GO&quot; is the state variable </pre>


<a name="wp99702"></a><pre class="pCode">     </pre>


<a name="wp99703"></a><pre class="pCode">     In the constructor we have :</pre>


<a name="wp99704"></a><pre class="pCode">     </pre>


<a name="wp99705"></a><pre class="pCode">        SC_CTOR(dma)</pre>


<a name="wp99706"></a><pre class="pCode">     #ifdef POWER_MODEL</pre>


<a name="wp99707"></a><pre class="pCode">        : DMA_pm(&quot;power&quot;)</pre>


<a name="wp99708"></a><pre class="pCode">     #endif</pre>


<a name="wp99709"></a><pre class="pCode">        {</pre>


<a name="wp99710"></a><pre class="pCode">        &#0133;</pre>


<a name="wp99711"></a><pre class="pCode">        #ifdef POWER_MODEL</pre>


<a name="wp99712"></a><pre class="pCode">           GO.init(DMA_pm.GO);</pre>


<a name="wp99713"></a><pre class="pCode">        #endif</pre>


<a name="wp99714"></a><pre class="pCode">        &#0133;</pre>


<a name="wp99871"></a><pre class="pCode">        }</pre>


<a name="wp99872"></a><pre class="pCode">     </pre>


<a name="wp99606"></a><p class="pBody">
Inside the functional code assign the state variables as usual.
</p>

<a name="MGCCIDPRead VCD Command"></a>

<a name="wp99885"></a><h5 class="pHeading4">
  


Read VCD Command
</h5>



<a name="wp99886"></a><p class="pBody">
The Read VCD step can include multiple VCD files (executed separately) corresponding to multiple testbenches that together provide the maximum functional coverage of the model legal scenarios. 
</p>


<a name="wp100001"></a><p class="pBody">
Each read_vcd call receives following inputs:
</p>


<a name="wp99887"></a>
<ul><li class="LL1BulSolid">Vcd file includes dumps of the inputs and outputs ports (mandatory for TLM Model) and state variables</li></ul>
<a name="wp99888"></a>
<ul><li class="LL1BulSolid">Hierarchical path to HDL model code inside the VCD </li></ul>
<a name="wp99889"></a>
<ul><li class="LL1BulSolid">Power dump in Vista format</li></ul>
<a name="wp99890"></a>
<ul><li class="LL1BulSolid">Associations between HDL signals and TLM/SystemC variables. (This can be a reference to a Tcl script that associates the two). </li></ul>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="0" width="80%" align="center">
  <tr valign="baseline">
    <td width="50" valign="top" background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg">&#160;</td>
    <td background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg"><span class="cNotesBlack">Note</span></td>
  </tr>
  <tr valign="top">
    <td width="50" valign="top"><img src="wwhelp/wwhimpl/common/images/nicon_note.jpg" /></td>
    <td valign="top">
            
<a name="wp99891"></a><p class="pnoteNote">
        	The HDL variable name should be the same as in VCD file. In cases using indices or slices in the HDL variable path, you need to add curly parenthesizes and back slashes:<br /><br />Example (batch command):<br />associate_signal_to_pv_variable {top.d.state\[1:0\]} {state}<br /><br />In cases where the TLM or SystemC variable should be associated with several HDL variables, you should create an aggregated signal in HDL, get simulation results with the aggregated signal, and use it for association with the TLM or SystemC variable.
        </p>

          </td>
  </tr>
  <tr height="2">
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="left" /></td>
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="right" /></td>
    </tr>
 </table>
<a name="wp99896"></a>
<ul><li class="LL1BulSolid">HDL simulation results object, in Vista internal data base format.</li></ul>
<a name="wp99897"></a><p class="pL1Body">Read VCD results object is used for the learning process and, in addition, can be analyzed using Vista Analysis viewer, enabling you to compare the original HDL power consumption against the learned power model. The results of read_vcd is in the HDL Simulations folder located under the model.</p>
<a name="MGCCIDPLearn Model Command"></a>

<a name="wp100021"></a><h5 class="pHeading4">
  


Learn Model Command
</h5>



<a name="wp100076"></a><p class="pBody">
The input for the learning command is the results of the read_vcd command object and selecting Power as the learning target. Click <span style=" font-weight: bold;">OK</span> to start the learning process. The learning results are the following: a Learning Report, located in the Learned Model folder of the model and internal data that is based on the specific power model code generated.
</p>


<a name="wp101322"></a><p class="pBody">
As shown in <a href='javascript:oT("CRF","Chapter_Modeling_Phase41.html#wp101354");'>Figure&#160;7&#8209;28</a>, the <span class="cRequired">Read VCD</span> command generates simulation power data for the original HDL in the HDL Simulation folder. The <span class="cRequired">Learn</span> command generates a power model and a Learning Report, which provides the learning accuracy level, in the Learned Model folder.
</p>





<a name="wp101354"></a><p class="pFigureTitle">
Figure 7&#8209;28. 


Results of Read VCD and Learn Commands


</p>
<div align="center"><img src="images/learned_generated_folders.gif" id="wp101359" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>


<a name="MGCCIDPPower Model Code Generate"></a>

<a name="wp100084"></a><h5 class="pHeading4">
  


Power Model Code Generate
</h5>



<a name="wp100085"></a><p class="pBody">
 Save and Code generation of the power model can be done using the <span style=" font-weight: bold;">Generate Code</span> command under the Commands menu. Select the model then right-click and choose <span style=" font-weight: bold;">Generate Code</span>.
</p>

<a name="MGCCIDPAdd New Power Model Code to Vista Project"></a>

<a name="wp100125"></a><h5 class="pHeading4">
  <a name="MGCCIDMVISTA_HELP_ADD_MODEL_POWER_FILES_TO_PROJECT"></a>


Add New Power Model Code to Vista Project
</h5>



<a name="wp100126"></a><p class="pBody">
For a TLM model, add the model to your Vista project. 
</p>


<a name="wp100151"></a><p class="pBody">
For a power model associated with any functional model, add the specific generated files to the Vista project using the Vista browser. Right-click and choose <span style=" font-weight: bold;">Add Power Model Files to Project</span>. In the dialog box, select the project names and click <span style=" font-weight: bold;">OK</span>. The <span class="cReqRpl">model_name</span><span style=" font-weight: regular; font-style: italic;">_power_model.h</span> and <span class="cReqRpl">model_name</span>_<span style=" font-weight: regular; font-style: italic;">power_model.cpp</span> files are added to the Vista project.
</p>


<a name="wp100995"></a><p class="pBody">
You can also add the <span class="cReqRpl">model_name</span><span style=" font-weight: regular; font-style: italic;">_power_model.h</span> and <span class="cReqRpl">model_name</span>_<span style=" font-weight: regular; font-style: italic;">power_model.cpp</span> files to your project or makefile either manually or using the Vista <span style=" font-weight: bold; font-style: italic;">Add Files</span> menu item.
</p>

<a name="MGCCIDPPower Analysis"></a>

<a name="wp100184"></a><h5 class="pHeading4">
  


Power Analysis
</h5>



<a name="wp100185"></a><p class="pBody">
To perform Power Analysis:
</p>


<a name="wp100196"></a>
<ol start="1."><li class="LL1Seq">Build and simulate your design.</li></ol>
<a name="wp100200"></a>
<ol start="2."><li class="LL1Seq">Open a Vista Analysis viewer.</li></ol>
<a name="wp100204"></a>
<ol start="3."><li class="LL1Seq">Expand your design.</li></ol>
<a name="wp100208"></a>
<ol start="4."><li class="LL1Seq">Double-click on the model to open the power graph. </li></ol>
<a name="wp100220"></a><p class="pBody">
Refer to &ldquo;<a href='javascript:oT("CRF","analysis_ssource01.html");'>Analysis Graphs and Reports</a>&rdquo; for more information on power analysis.
</p>


<a name="wp100186"></a><p class="pBody">
You can compare your model power consumption results against the power results of the original HDL simulation, located in the model HDL Simulation folder. Select the simulation icon then click the Analysis Viewer icon.
</p>

<a name="MGCCIDPWork Model for Power Learning (TLM and non-TLM State Based)"></a>

<a name="wp100187"></a><h5 class="pHeading4">
  


Work Model for Power Learning (TLM and non-TLM State Based)
</h5>



<a name="wp100182"></a><p class="pBody">
<a href='javascript:oT("CRF","Chapter_Modeling_Phase41.html#wp100255");'>Figure&#160;7&#8209;29</a> illustrates a work model you can use for performing power learning.
</p>





<a name="wp100255"></a><p class="pFigureTitle">
Figure 7&#8209;29. 


Power Learning Work Model


</p>
<div align="center"><img src="images/PowerLearningWorkModel.gif" id="wp100260" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>


<a name="MGCCIDPBatch Tcl Script Examples"></a>

<a name="wp100266"></a><h5 class="pHeading4">
  


Batch Tcl Script Examples
</h5>



<a name="wp100272"></a><h6 class="pHTaskSubhead">
  Example of Create Model and Associate for TLM Model
</h6>



<a name="wp100273"></a><pre class="pCode">     parse_verilog_source ./dma.v models</pre>


<a name="wp100274"></a><pre class="pCode">     create_tlm_model DMA models {</pre>


<a name="wp100275"></a><pre class="pCode">       {slave /TLM/protocols/ahb_slave slave}</pre>


<a name="wp100276"></a><pre class="pCode">       {master /TLM/protocols/ahb_master master}</pre>


<a name="wp100277"></a><pre class="pCode">       {irq /TLM/protocols/signal master 1}</pre>


<a name="wp100278"></a><pre class="pCode">     } {} -m state.tcl  -power_kind learned</pre>


<a name="wp100279"></a><pre class="pCode">     associate_model_to_hdl_unit models DMA -hdl_unit_name dma -port_association_list {</pre>


<a name="wp100280"></a><pre class="pCode">       slave {</pre>


<a name="wp100281"></a><pre class="pCode">         {CLK Clock}</pre>


<a name="wp100282"></a><pre class="pCode">         {HTRANS HTRANS}</pre>


<a name="wp100283"></a><pre class="pCode">         {HSEL HSEL}</pre>


<a name="wp100284"></a><pre class="pCode">         {HWRITE HWRITE}</pre>


<a name="wp100285"></a><pre class="pCode">         {HSIZE HSIZE}</pre>


<a name="wp100286"></a><pre class="pCode">         {HREADY HREADY}</pre>


<a name="wp100287"></a><pre class="pCode">         {HADDR HADDR}</pre>


<a name="wp100288"></a><pre class="pCode">         {HWDATA HWDATA}</pre>


<a name="wp100289"></a><pre class="pCode">         {HRESP HRESP}</pre>


<a name="wp100290"></a><pre class="pCode">         {HRDATA HRDATA}</pre>


<a name="wp100291"></a><pre class="pCode">         {HBURST HBURST}</pre>


<a name="wp100292"></a><pre class="pCode">       }</pre>


<a name="wp100293"></a><pre class="pCode">       master {</pre>


<a name="wp100294"></a><pre class="pCode">         {CLK Clock}</pre>


<a name="wp100295"></a><pre class="pCode">         {HBUSREQ HBUSREQM}</pre>


<a name="wp100296"></a><pre class="pCode">         {HGRANT HGRANTM}</pre>


<a name="wp100297"></a><pre class="pCode">         {HADDR HADDRM}</pre>


<a name="wp100298"></a><pre class="pCode">         {HWRITE HWRITEM}</pre>


<a name="wp100299"></a><pre class="pCode">         {HSIZE HSIZEM}</pre>


<a name="wp100300"></a><pre class="pCode">         {HLOCK 0}</pre>


<a name="wp100301"></a><pre class="pCode">         {HTRANS HTRANSM}</pre>


<a name="wp100302"></a><pre class="pCode">         {HBURST HBURSTM}</pre>


<a name="wp100303"></a><pre class="pCode">         {HWDATA HWDATAM}</pre>


<a name="wp100304"></a><pre class="pCode">         {HRDATA HRDATAM}</pre>


<a name="wp100305"></a><pre class="pCode">         {HREADY HREADYM}</pre>


<a name="wp100306"></a><pre class="pCode">         {HRESP HRESPM}</pre>


<a name="wp100307"></a><pre class="pCode">       }</pre>


<a name="wp100308"></a><pre class="pCode">       irq {</pre>


<a name="wp100309"></a><pre class="pCode">         {CLK Clock}</pre>


<a name="wp100310"></a><pre class="pCode">         {VALUE IRQM}</pre>


<a name="wp100311"></a><pre class="pCode">       }</pre>


<a name="wp100312"></a><pre class="pCode">     }</pre>


<a name="wp100344"></a><pre class="pCode">     </pre>


<a name="wp100346"></a><p class="pBody">
<span style=" font-style: italic;">state.tcl</span> file:
</p>


<a name="wp100347"></a><pre class="pCode">     declare_register slave Source      0x000 0:7 -kind address  -rw_access w</pre>


<a name="wp100348"></a><pre class="pCode">     declare_register slave Destination 0x004 0:7 -kind address  -rw_access w</pre>


<a name="wp100349"></a><pre class="pCode">     declare_register slave Size        0x008 0:7 -kind number   -rw_access w</pre>


<a name="wp100350"></a><pre class="pCode">     declare_register slave Trigger     0x00C 0:7 -kind bitfield -rw_access w -is_trigger</pre>


<a name="wp100351"></a><pre class="pCode">     declare_register slave Acknowledge 0x010 0:7 -kind bitfield -rw_access w -is_trigger</pre>


<a name="wp100352"></a><pre class="pCode">     </pre>


<a name="wp100353"></a><pre class="pCode">     </pre>


<a name="wp100354"></a><pre class="pCode">     declare_variable state -type int32</pre>


<a name="wp100355"></a><pre class="pCode">     declare_variable Go  -type int32</pre>


<a name="wp100356"></a><pre class="pCode">     </pre>


<a name="wp100357"></a><pre class="pCode">     add_delay_policy slave.READ  1</pre>


<a name="wp100358"></a><pre class="pCode">     add_delay_policy slave.WRITE 2</pre>


<a name="wp100359"></a><pre class="pCode">     add_pipeline_policy master.WRITE master.READ -latency 0 -buffer_size 1 -sync 0 -power 0</pre>


<a name="wp100360"></a><pre class="pCode">     set_leakage_power 1</pre>


<a name="wp100375"></a><pre class="pCode">     </pre>


<a name="wp100377"></a><h6 class="pHTaskSubhead">
  Example of Create and Associate for Pin Level Model
</h6>



<a name="wp100378"></a><pre class="pCode">     parse_verilog_source ./dma.v models</pre>


<a name="wp100379"></a><pre class="pCode">     create_tlm_model DMA models {</pre>


<a name="wp100380"></a><pre class="pCode">     } {} -m state.tcl  -power_kind learned -force</pre>


<a name="wp100381"></a><pre class="pCode">     associate_hdl_to_model_unit models DMA -hdl_unit_name dma</pre>


<a name="wp100382"></a><pre class="pCode">     </pre>


<a name="wp100383"></a><pre class="pCode">     Assuming that we have state variable, named &quot;Go&quot;, the state.tcl file will be following :</pre>


<a name="wp100384"></a><pre class="pCode">     </pre>


<a name="wp100385"></a><pre class="pCode">     declare_variable GO  -type int32</pre>


<a name="wp100386"></a><pre class="pCode">     </pre>


<a name="wp100387"></a><pre class="pCode">     set_leakage_power 1</pre>


<a name="wp100388"></a><pre class="pCode">     </pre>


<a name="wp100389"></a><pre class="pCode">     </pre>


<a name="wp100390"></a><pre class="pCode">     Example of DMA SystemC pin level model ready for the power learning:</pre>


<a name="wp100391"></a><pre class="pCode">     Dma_sc.h file:</pre>


<a name="wp100392"></a><pre class="pCode">     </pre>


<a name="wp100393"></a><pre class="pCode">      </pre>


<a name="wp100394"></a><pre class="pCode">     #pragma once</pre>


<a name="wp100395"></a><pre class="pCode">     </pre>


<a name="wp100396"></a><pre class="pCode">     #include &lt;systemc.h&gt;</pre>


<a name="wp100397"></a><pre class="pCode">     #ifdef POWER_MODEL</pre>


<a name="wp100398"></a><pre class="pCode">     #include &quot;DMA_power_model.h&quot;</pre>


<a name="wp100399"></a><pre class="pCode">     #include &quot;model_builder.h&quot;</pre>


<a name="wp100400"></a><pre class="pCode">     #endif</pre>


<a name="wp100401"></a><pre class="pCode">     SC_MODULE (dma) {</pre>


<a name="wp100402"></a><pre class="pCode">        sc_in&lt;bool&gt; Clock;</pre>


<a name="wp100403"></a><pre class="pCode">        sc_in&lt;bool&gt; HRESET;</pre>


<a name="wp100404"></a><pre class="pCode">     </pre>


<a name="wp100405"></a><pre class="pCode">        sc_in&lt;bool&gt; HSEL;</pre>


<a name="wp100406"></a><pre class="pCode">        sc_in&lt;sc_uint&lt;32&gt; &gt;  HADDR;</pre>


<a name="wp100407"></a><pre class="pCode">        sc_out&lt;sc_uint&lt;32&gt; &gt; HRDATA;</pre>


<a name="wp100408"></a><pre class="pCode">        sc_in&lt;sc_uint&lt;32&gt; &gt;  HWDATA;</pre>


<a name="wp100409"></a><pre class="pCode">        sc_in&lt;sc_uint&lt;2&gt; &gt;   HTRANS;</pre>


<a name="wp100410"></a><pre class="pCode">        sc_in&lt;bool&gt; HWRITE;</pre>


<a name="wp100411"></a><pre class="pCode">        sc_in&lt;sc_uint&lt;3&gt; &gt;   HBURST;</pre>


<a name="wp100439"></a><pre class="pCode">        sc_in&lt;sc_uint&lt;3&gt; &gt;   HSIZE;</pre>


<a name="wp100440"></a><pre class="pCode">        sc_out&lt;bool&gt; HREADY;</pre>


<a name="wp100441"></a><pre class="pCode">        sc_out&lt;sc_uint&lt;2&gt; &gt;  HRESP;</pre>


<a name="wp100442"></a><pre class="pCode">     </pre>


<a name="wp100443"></a><pre class="pCode">        sc_out&lt;bool&gt; HBUSREQM;</pre>


<a name="wp100444"></a><pre class="pCode">        sc_in&lt;bool&gt;  HGRANTM;</pre>


<a name="wp100445"></a><pre class="pCode">        sc_out&lt;sc_uint&lt;32&gt; &gt; HADDRM;</pre>


<a name="wp100446"></a><pre class="pCode">        sc_in&lt;sc_uint&lt;32&gt; &gt;  HRDATAM;</pre>


<a name="wp100447"></a><pre class="pCode">        sc_out&lt;sc_uint&lt;32&gt; &gt; HWDATAM;</pre>


<a name="wp100448"></a><pre class="pCode">        sc_out&lt;sc_uint&lt;2&gt; &gt;  HTRANSM;</pre>


<a name="wp100449"></a><pre class="pCode">        sc_out&lt;bool&gt; HWRITEM;</pre>


<a name="wp100450"></a><pre class="pCode">        sc_out&lt;sc_uint&lt;3&gt; &gt;  HBURSTM;</pre>


<a name="wp100451"></a><pre class="pCode">        sc_out&lt;sc_uint&lt;3&gt; &gt;  HSIZEM;</pre>


<a name="wp100452"></a><pre class="pCode">        sc_in&lt;bool&gt;  HREADYM;</pre>


<a name="wp100453"></a><pre class="pCode">        sc_in&lt;sc_uint&lt;2&gt; &gt;  HRESPM;</pre>


<a name="wp100454"></a><pre class="pCode">        sc_out&lt;bool&gt; IRQM;</pre>


<a name="wp100455"></a><pre class="pCode">     </pre>


<a name="wp100456"></a><pre class="pCode">        sc_uint&lt;32&gt; Source, Destination, Size, Offset, Data;</pre>


<a name="wp100457"></a><pre class="pCode">        sc_uint&lt;3&gt; State;</pre>


<a name="wp100458"></a><pre class="pCode">             bool Interrupt;</pre>


<a name="wp100459"></a><pre class="pCode">     #ifdef POWER_MODEL</pre>


<a name="wp100460"></a><pre class="pCode">             // create the required variable(s)</pre>


<a name="wp100461"></a><pre class="pCode">             pm_object&lt;bool&gt; GO;</pre>


<a name="wp100462"></a><pre class="pCode">             // instantiate the power model</pre>


<a name="wp100463"></a><pre class="pCode">             DMA_power_model DMA_pm;</pre>


<a name="wp100464"></a><pre class="pCode">     #else</pre>


<a name="wp100465"></a><pre class="pCode">        bool GO;</pre>


<a name="wp100466"></a><pre class="pCode">     #endif</pre>


<a name="wp100467"></a><pre class="pCode">             </pre>


<a name="wp100468"></a><pre class="pCode">     </pre>


<a name="wp100469"></a><pre class="pCode">        void thread0();</pre>


<a name="wp100470"></a><pre class="pCode">        void thread1();</pre>


<a name="wp100471"></a><pre class="pCode">        SC_CTOR(dma)</pre>


<a name="wp100472"></a><pre class="pCode">     #ifdef POWER_MODEL</pre>


<a name="wp100473"></a><pre class="pCode">               : DMA_pm(&quot;power&quot;)</pre>


<a name="wp100474"></a><pre class="pCode">     #endif</pre>


<a name="wp100475"></a><pre class="pCode">               {</pre>


<a name="wp100476"></a><pre class="pCode">           SC_METHOD(thread0);</pre>


<a name="wp100477"></a><pre class="pCode">           sensitive_pos &lt;&lt; Clock;</pre>


<a name="wp100478"></a><pre class="pCode">           sensitive&lt;&lt;HSEL;</pre>


<a name="wp100479"></a><pre class="pCode">           sensitive&lt;&lt;HWRITE;</pre>


<a name="wp100480"></a><pre class="pCode">           sensitive&lt;&lt;HTRANS;</pre>


<a name="wp100481"></a><pre class="pCode">           sensitive&lt;&lt;HADDR;</pre>


<a name="wp100482"></a><pre class="pCode">           sensitive&lt;&lt;HWDATA;</pre>


<a name="wp100483"></a><pre class="pCode">           sensitive&lt;&lt;HGRANTM;</pre>


<a name="wp100484"></a><pre class="pCode">           sensitive&lt;&lt;HREADYM;</pre>


<a name="wp100485"></a><pre class="pCode">     </pre>


<a name="wp100486"></a><pre class="pCode">           SC_METHOD(thread1);</pre>


<a name="wp100487"></a><pre class="pCode">           sensitive_pos &lt;&lt; Clock;</pre>


<a name="wp100488"></a><pre class="pCode">           sensitive&lt;&lt;HRESET;</pre>


<a name="wp100489"></a><pre class="pCode">     #ifdef POWER_MODEL</pre>


<a name="wp100490"></a><pre class="pCode">                     GO.init(DMA_pm.GO);</pre>


<a name="wp100491"></a><pre class="pCode">     #endif</pre>


<a name="wp100492"></a><pre class="pCode">        }</pre>


<a name="wp100493"></a><pre class="pCode">     };</pre>


<a name="wp100521"></a><pre class="pCode">     </pre>


<a name="wp100508"></a><p class="pBody">
File dma_sc.cpp:
</p>


<a name="wp100510"></a><pre class="pCode">     void dma::thread0() {  // NO Code Changes Needed</pre>


<a name="wp100511"></a><pre class="pCode">     }</pre>


<a name="wp100512"></a><pre class="pCode">     </pre>


<a name="wp100513"></a><pre class="pCode">     void dma::thread1() { // NO Code Changes Needed</pre>


<a name="wp100514"></a><pre class="pCode">     }</pre>


<a name="wp100526"></a><pre class="pCode">     </pre>

<a name="MGCCIDPSpecifying or Modifying HDL Signal Association"></a>

<a name="wp100080"></a><h5 class="pHeading4">
  <a name="MGCCIDMHELP_MODEL_ASSOCIATE_HDL"></a>


Specifying or Modifying HDL Signal Association
</h5>



<a name="wp96706"></a><p class="pBody">
To specify or modify the HDL signal association:
</p>


<a name="wp98889"></a>
<ol start="1."><li class="LL1Seq">In the model window, select the <span style=" font-weight: bold;">Extraction &gt; Associate HDL</span> tab:</li></ol>



<a name="wp98890"></a><p class="pFigureTitle">
Figure 7&#8209;30. 


Associate HDL Tab


</p>
<div align="center"><img src="images/model_builder_associate.gif" id="wp98895" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>



<a name="wp98891"></a>
<ol start="2."><li class="LL1Seq">To associate signals from a different HDL unit:</li></ol>
<a name="wp96770"></a><ol start="1."><li class="LL2Seq">Click <span style=" font-weight: bold;">Set HDL unit.</span></li></ol>



<a name="wp98960"></a><p class="pFigureTitle">
Figure 7&#8209;31. 


Set HDL Unit Dialog Box


</p>
<div align="center"><img src="images/set_hdl_unit.gif" id="wp98965" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>



<a name="wp96766"></a><ol start="2."><li class="LL2Seq">In the unit selection dialog, select the HDL source file and unit name. </li></ol>
<a name="wp96711"></a>
<ol start="3."><li class="LL1Seq">For automatic extraction of ports, click <span style=" font-weight: bold;">Auto extract</span>.</li></ol>
<a name="wp96712"></a><p class="pL2Body">All ports are extracted. After extraction, the HDL signals are associated with port Protocol Parameters and displayed in the Association tab sheet.</p>

<a name="wp96714"></a>
<ol start="4."><li class="LL1Seq">To review the associations for a port, select a port from the pull-down Port name list.</li></ol>
<a name="wp96715"></a><p class="pL1Body">The protocol parameters are displayed for the selected port. The leftmost column indicates type: Master (M), Slave (S), Clock (C) or Reset (R).</p>

<a name="wp100613"></a><p class="pL1Body">In the Signals table, the signals are labeled I (Input) or O (Output).</p>

<a name="wp96823"></a>
<ol start="5."><li class="LL1Seq">To associate signals with parameters that have with matching names, click <span style=" font-weight: bold;">Match by Name</span>.</li></ol>
<a name="wp96825"></a>
<ol start="6."><li class="LL1Seq">To perform a required action on a parameter, highlight the parameter in the parameters table then:</li></ol>
<a name="wp96826"></a><ol start="1."><li class="LL2Seq">To associate the parameter with an HDL signal, highlight the HDL signal then click <span style=" font-weight: bold;">Associate</span>.</li></ol>
<a name="wp96827"></a><ol start="2."><li class="LL2Seq">To set the parameter to a default value, if one exists, click <span style=" font-weight: bold;">Default Value</span>.</li></ol>
<a name="wp96828"></a><ol start="3."><li class="LL2Seq">To remove the current association, click <span style=" font-weight: bold;">Clear</span>.</li></ol>
<a name="wp96829"></a>
<ol start="7."><li class="LL1Seq">Repeat the previous step for all parameters to be associated.</li></ol>
<a name="wp96830"></a>
<ol start="8."><li class="LL1Seq">Click <span style=" font-weight: bold;">Save</span> to save your changes.

<div id="TableDivQz"></div>
<div align="center">


<a name="wp96920"></a><p class="pTableTitle">
Table 7&#8209;10. 


Associate HDL Tab Options&#160;
</p>



<table border="1" cellpadding="5" cellspacing="0" id="wp96920table96918">
  <tr bgcolor="#CCCCCC"  align="center" valign="middle">
    <th>

<a name="wp96924"></a><p class="pTableHeading">
Field/Control
</p>
</th>

    <th>

<a name="wp96926"></a><p class="pTableHeading">
Description
</p>


</th>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp96953"></a><p class="pTableCell">
HDL Unit

</p>


<a name="wp96932"></a><p class="pTableCell">
HDL source

</p>

</td>

    <td>


<a name="wp96983"></a><p class="pTableCell">
Indicates name of HDL unit

</p>


<a name="wp96986"></a><p class="pTableCell">
Indicates path for HDL source file

</p>


<a name="wp96974"></a><p class="pTableCell">
(Change using <span style=" font-weight: bold;">Set HDL unit</span>)

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp96969"></a><p class="pTableCell">
Set HDL unit

</p>

</td>

    <td>


<a name="wp96970"></a><p class="pTableCell">
Opens dialog for selecting name and source file of HDL unit

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp96936"></a><p class="pTableCell">
Auto extract

</p>

</td>

    <td>


<a name="wp96938"></a><p class="pTableCell">
Extracts HDL signal associations and displays signals

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97037"></a><p class="pTableCell">
Port Name

</p>

</td>

    <td>


<a name="wp97039"></a><p class="pTableCell">
Indicates the Model port name; use drop-down list to select name

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97033"></a><p class="pTableCell">
Protocol

</p>

</td>

    <td>


<a name="wp97035"></a><p class="pTableCell">
Indicates port protocol; can not be changed

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97029"></a><p class="pTableCell">
Protocol Parameters

</p>

</td>

    <td>


<a name="wp97031"></a><p class="pTableCell">
Names and types of protocol parameters; type can be Master (M), Slave (S), Clock (C) or Reset (R) 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97025"></a><p class="pTableCell">
Associated Signals

</p>

</td>

    <td>


<a name="wp97027"></a><p class="pTableCell">
Name of HDL signal associated with each protocol parameter

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97021"></a><p class="pTableCell">
HDL Signals

</p>

</td>

    <td>


<a name="wp97023"></a><p class="pTableCell">
Name and type of each HDL signal; type is I or O

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97094"></a><p class="pTableCell">
Associate

</p>

</td>

    <td>


<a name="wp97096"></a><p class="pTableCell">
Assigns selected signal to highlighted protocol parameter

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97090"></a><p class="pTableCell">
Clear

</p>

</td>

    <td>


<a name="wp97092"></a><p class="pTableCell">
Removes signal associations from selected protocol parameter

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97086"></a><p class="pTableCell">
Match by Name

</p>

</td>

    <td>


<a name="wp97088"></a><p class="pTableCell">
Associates a signal of the same name to each protocol parameter where possible

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97082"></a><p class="pTableCell">
Default Value

</p>

</td>

    <td>


<a name="wp97084"></a><p class="pTableCell">
Sets protocol parameter to default value if one exists

</p>

</td>


</tr>


</table>

</div>
<div id='EndTable'> </div>

<br clear='left' class='Blank4Table' />

</li></ol><a name="MGCCIDPReading VCD Simulation Data"></a>

<a name="wp97162"></a><h5 class="pHeading4">
  <a name="MGCCIDMHELP_READ_VCD"></a>


Reading VCD Simulation Data
</h5>



<a name="wp97163"></a><p class="pBody">
To read VCD simulation data:
</p>


<a name="wp97164"></a>
<ol start="1."><li class="LL1Seq">Highlight the model which is associated with the HDL unit.</li></ol>
<a name="wp97165"></a>
<ol start="2."><li class="LL1Seq">From the main menu toolbar or the right-click menu, choose <span style=" font-weight: bold;">Modeling &gt; Read VCD</span>.</li></ol>
<a name="wp97261"></a><p class="pL1Body">The Read VCD dialog box opens.</p>




<a name="wp97166"></a><p class="pFigureTitle">
Figure 7&#8209;32. 


Read VCD


</p>
<div align="center"><img src="images/read_vcd.gif" id="wp98905" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>



<a name="wp97167"></a>
<ol start="3."><li class="LL1Seq">Use the <span style=" font-weight: bold;">VCD path </span>field browse button to specify the path and .<span style=" font-weight: bold; font-style: italic;">vcd</span> filename of the VCD unit. </li></ol>
<a name="wp97168"></a>
<ol start="4."><li class="LL1Seq">Use the <span style=" font-weight: bold;">VCD unit </span>field browse button to select the target unit in the VCD hierarchy. </li></ol>



<a name="wp97170"></a><p class="pFigureTitle">
Figure 7&#8209;33. 


Select VCD Unit


</p>
<div align="center"><img src="images/select_vcd_unit.gif" id="wp98915" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>



<a name="wp97172"></a>
<ol start="5."><li class="LL1Seq">To include power data:</li></ol>
<a name="wp97306"></a><ol start="1."><li class="LL2Seq">Select <span style=" font-weight: bold;">Extract power</span>. </li></ol>
<a name="wp97316"></a><ol start="2."><li class="LL2Seq">In the now enabled Power Waveform field, use the browse button and specify the name of the power waveform file.</li></ol>
<a name="wp97174"></a>
<ol start="6."><li class="LL1Seq">In the <span style=" font-weight: bold;">Resulting database name</span> field, enter a name for the resulting timing/power database.</li></ol>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="0" width="80%" align="center">
  <tr valign="baseline">
    <td width="50" valign="top" background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg">&#160;</td>
    <td background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg"><span class="cNotesBlack">Note</span></td>
  </tr>
  <tr valign="top">
    <td width="50" valign="top"><img src="wwhelp/wwhimpl/common/images/nicon_note.jpg" /></td>
    <td valign="top">
            
<a name="wp97699"></a><p class="pnoteNote">
        	To modify the default name given to the resulting database, use the DEFAULT_READ_VCD_RESULT_DB variable in the Settings file. See &ldquo;<a href='javascript:oT("CRF","setup_invocation07.html#wp13265");'>Settings for Modeling</a>&rdquo; for further information.
        </p>

          </td>
  </tr>
  <tr height="2">
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="left" /></td>
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="right" /></td>
    </tr>
 </table>
<a name="wp97646"></a>
<ol start="7."><li class="LL1Seq">In the <span style=" font-weight: bold;">Tcl script</span> field, use the browse button to specify the path for .<span style=" font-weight: bold; font-style: italic;">tcl</span> script file. </li></ol>
<a name="wp97387"></a><p class="pL1Body">For information on the contents of this script, see <a href='javascript:oT("CRF","Chapter_Command_Line_Ops_mb37.html#wp35219");'>Table&#160;18&#8209;3</a>.</p>

<a name="wp97176"></a>
<ol start="8."><li class="LL1Seq">In <span style=" font-weight: bold;">Other options</span>, specify any other options to be used by the <span class="cRequired">read_vcd</span> command. </li></ol>
<a name="wp97177"></a>
<ol start="9."><li class="LL1Seq">Click <span style=" font-weight: bold;">OK</span> to begin extracting the timing and/or power data.</li></ol>
<a name="wp97178"></a><p class="pL1Body">After extraction has begun, if required, you can click <span style=" font-weight: bold;">Abort</span> to stop the procedure before results are produced.</p>

<a name="wp97672"></a><p class="pBody">
When extraction is complete, a simulation database is displayed in the HDL Simulation folder under the relevant model. 
</p>
<div id="TableDivQz"></div>
<div align="center">


<a name="wp97783"></a><p class="pTableTitle">
Table 7&#8209;11. 


Read Vcd Dialog Box Options&#160;
</p>



<table border="1" cellpadding="5" cellspacing="0" id="wp97783table97778">
  <tr bgcolor="#CCCCCC"  align="center" valign="middle">
    <th>

<a name="wp97787"></a><p class="pTableHeading">
Field/Control
</p>
</th>

    <th>

<a name="wp97789"></a><p class="pTableHeading">
Description
</p>


</th>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97791"></a><p class="pTableCell">
VCD path

</p>

</td>

    <td>


<a name="wp97793"></a><p class="pTableCell">
Specifies location and name of the VCD source; can be selected using browse button

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97795"></a><p class="pTableCell">
VCD unit

</p>

</td>

    <td>


<a name="wp97797"></a><p class="pTableCell">
Specifies hierarchical path and name of the VCD unit; can be selected using browse button

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97799"></a><p class="pTableCell">
Extract Power

</p>

</td>

    <td>


<a name="wp97801"></a><p class="pTableCell">
Indicates whether power data is to be included or not

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97803"></a><p class="pTableCell">
Power Waveform

</p>

</td>

    <td>


<a name="wp97805"></a><p class="pTableCell">
Specifies location and name of power waveform file; can be selected using browse button

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97807"></a><p class="pTableCell">
Resulting database name

</p>

</td>

    <td>


<a name="wp97809"></a><p class="pTableCell">
Specifies name of simulation data object

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97811"></a><p class="pTableCell">
Tcl script

</p>

</td>

    <td>


<a name="wp97813"></a><p class="pTableCell">
Specifies location and name of Tcl script; can be selected using browse button

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97815"></a><p class="pTableCell">
Other options

</p>

</td>

    <td>


<a name="wp97817"></a><p class="pTableCell">
Specifies any other options to be used by the <span class="cRequired">read_vcd</span> command

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97819"></a><p class="pTableCell">
Abort

</p>

</td>

    <td>


<a name="wp97821"></a><p class="pTableCell">
Terminates creation of simulation data process

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp97823"></a><p class="pTableCell">
OK 

</p>

</td>

    <td>


<a name="wp97825"></a><p class="pTableCell">
Extracts simulation data from VCD

</p>

</td>


</tr>


</table>

</div>
<div id='EndTable'> </div>
<p class="pBody">
<br clear='left' class='Blank4Table' />


</p>

<a name="MGCCIDPAssociating Signals for Learning"></a>

<a name="wp97718"></a><h5 class="pHeading4">
  


Associating Signals for Learning
</h5>



<a name="wp97719"></a><p class="pBody">
Signals in the VCD can be included as part of the input to Learning.
</p>


<a name="wp97720"></a><p class="pBody">
In the <span class="cRequired">read_vcd</span> command, add a Tcl script using the -t (-tcl_script) option. The script should contain the commands specified in <a href='javascript:oT("CRF","Chapter_Command_Line_Ops_mb37.html#wp35219");'>Table&#160;18&#8209;3</a>. 
</p>


<a name="wp97721"></a><p class="pBody">
During the read_vcd operation, a trace of the signals is saved.
</p>


<a name="wp97722"></a><p class="pBody">
In Learning, when a VCD signal is used as input, the saved trace from the read_vcd operation is referred to and its values are used to learn the model accurately.
</p>

<a name="MGCCIDPActivating Learning Power"></a>

<a name="wp97830"></a><h5 class="pHeading4">
  <a name="MGCCIDMHELP_LEARN"></a>


Activating Learning Power
</h5>



<a name="wp97831"></a><p class="pBody">
To activate Learning on the specified input power data:
</p>


<a name="wp97832"></a>
<ol start="1."><li class="LL1Seq">Highlight a model that is associated with an HDL unit; the model should have at least one HDL simulation results.</li></ol>
<a name="wp97833"></a>
<ol start="2."><li class="LL1Seq">From the menu toolbar or right-click menu, choose <span style=" font-weight: bold;">Learn</span>. </li></ol>
<a name="wp97891"></a><p class="pL1Body">The Learn dialog box opens.</p>

<a name="wp97834"></a>
<ol start="3."><li class="LL1Seq">Select the simulation-data object(s) to use in learning. </li></ol>
<a name="wp97835"></a>
<ol start="4."><li class="LL1Seq">Select Learn Power for power behavior learning.</li></ol>
<a name="wp97840"></a>
<ol start="5."><li class="LL1Seq">Use the Options field for additional Learning settings. (See the <a href='javascript:oT("CRF","Chapter_Command_Line_Ops_mb25.html");'>learn_model</a> command for details.)</li></ol>
<a name="wp97841"></a>
<ol start="6."><li class="LL1Seq">Click <span style=" font-weight: bold;">Save Settings</span> to save your current configuration without running Learning.</li></ol>
<a name="wp97842"></a>
<ol start="7."><li class="LL1Seq">Click <span style=" font-weight: bold;">OK</span> to begin processing the power data; any unsaved changes are automatically saved.</li></ol>
<a name="wp97844"></a><p class="pBody">
Once the learning process has begun, you can click <span style=" font-weight: bold;">Abort</span> to stop the procedure before results are produced. When the learning process is complete, the Learning report is created and displayed in the Learned Model folder under the relevant model.
</p>





<a name="wp97847"></a><p class="pFigureTitle">
Figure 7&#8209;34. 


Learn Dialog Box


</p>
<div align="center"><img src="images/learn.gif" id="wp98927" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>



<a name="wp98103"></a><p class="pBodyRelative">

</p>
<div id="TableDivQz"></div>
<div align="center">


<a name="wp98009"></a><p class="pTableTitle">
Table 7&#8209;12. 


Learn Dialog Box Options&#160;
</p>



<table border="1" cellpadding="5" cellspacing="0" id="wp98009table98004">
  <tr bgcolor="#CCCCCC"  align="center" valign="middle">
    <th>

<a name="wp98013"></a><p class="pTableHeading">
Field/Control
</p>
</th>

    <th>

<a name="wp98015"></a><p class="pTableHeading">
Description
</p>


</th>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98017"></a><p class="pTableCell">
Select database

</p>

</td>

    <td>


<a name="wp98019"></a><p class="pTableCell">
Indicates one or more simulation databases for learning

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98021"></a><p class="pTableCell">
Select All

</p>

</td>

    <td>


<a name="wp98084"></a><p class="pTableCell">
Selects all simulation databases in database list

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98025"></a><p class="pTableCell">
Clear

</p>

</td>

    <td>


<a name="wp98096"></a><p class="pTableCell">
Deselects all simulation databases in database list

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98029"></a><p class="pTableCell">
Learn Power 

</p>

</td>

    <td>


<a name="wp98031"></a><p class="pTableCell">
If selected, activates power behavior learning

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98041"></a><p class="pTableCell">
Options

</p>

</td>

    <td>


<a name="wp98043"></a><p class="pTableCell">
Specifies any additional options to be used by the <span class="cRequired">learn_model</span> command (including any model source)

</p>


<a name="wp98171"></a><p class="pTableCell">
See <a href='javascript:oT("CRF","Chapter_Command_Line_Ops_mb25.html");'>learn_model</a> for valid options.

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98045"></a><p class="pTableCell">
Overall Progress

</p>

</td>

    <td>


<a name="wp98047"></a><p class="pTableCell">
Indicates the overall progress of learning in percent (%)

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98049"></a><p class="pTableCell">
Current phase 

</p>

</td>

    <td>


<a name="wp98051"></a><p class="pTableCell">
Indicates name of current learning phase

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98220"></a><p class="pTableCell">
Save Settings

</p>

</td>

    <td>


<a name="wp98222"></a><p class="pTableCell">
Saves current learning settings

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98216"></a><p class="pTableCell">
Abort

</p>

</td>

    <td>


<a name="wp98218"></a><p class="pTableCell">
Terminates learning process

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98212"></a><p class="pTableCell">
OK

</p>

</td>

    <td>


<a name="wp98214"></a><p class="pTableCell">
Activates learning engine

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98208"></a><p class="pTableCell">
Cancel

</p>

</td>

    <td>


<a name="wp98210"></a><p class="pTableCell">
Terminates learning process and closes the Learn dialog box

</p>

</td>


</tr>


</table>

</div>
<div id='EndTable'> </div>
<p class="pBodyRelative">
<br clear='left' class='Blank4Table' />


</p>

<a name="MGCCIDPMachine Architecture Specification"></a>

<a name="wp98257"></a><h5 class="pHeading4">
  


Machine Architecture Specification
</h5>



<a name="wp98258"></a><p class="pBody">
A more accurate power model can be constructed when information about internal machine architecture of a model is included. The information is specified in a TCL script that can be either generated using the GUI forms described in the Model window or composed directly with the equivalent TCL commands in &ldquo;<a href='javascript:oT("CRF","Chapter_Command_Line_Ops_mb47.html");'>Machine Architecture Command Reference - Modeling</a>&rdquo;.
</p>


<a name="wp98260"></a><p class="pBody">
The machine architecture has the following components:
</p>


<a name="wp98261"></a>
<ul><li class="LL1BulSolid">Control registers </li></ul>
<a name="wp98309"></a>
<ul><li class="LL1BulSolid">FIFO Registers</li></ul>
<a name="wp98316"></a>
<ul><li class="LL1BulSolid">Memory ranges</li></ul>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="0" width="80%" align="center">
  <tr valign="baseline">
    <td width="50" valign="top" background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg">&#160;</td>
    <td background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg"><span class="cNotesBlack">Note</span></td>
  </tr>
  <tr valign="top">
    <td width="50" valign="top"><img src="wwhelp/wwhimpl/common/images/nicon_note.jpg" /></td>
    <td valign="top">
            
<a name="wp98304"></a><p class="pnoteNote">
        	The Control registers, FIFO registers, and Memory are as defined in &ldquo;<a href='javascript:oT("CRF","Chapter_Modeling_Phase16.html");'>Defining Parameters, Registers and Memory</a>&rdquo;.
        </p>

          </td>
  </tr>
  <tr height="2">
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="left" /></td>
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="right" /></td>
    </tr>
 </table>
<a name="wp98267"></a>
<ul><li class="LL1BulSolid">Variables</li></ul>
<a name="wp98354"></a>
<ul><li class="LL1BulSolid">Power policies</li></ul>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="0" width="80%" align="center">
  <tr valign="baseline">
    <td width="50" valign="top" background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg">&#160;</td>
    <td background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg"><span class="cNotesBlack">Note</span></td>
  </tr>
  <tr valign="top">
    <td width="50" valign="top"><img src="wwhelp/wwhimpl/common/images/nicon_note.jpg" /></td>
    <td valign="top">
            
<a name="wp98269"></a><p class="pnoteNote">
        	The Power Policies are defined in the T (Timing Extraction) Tab
        </p>

          </td>
  </tr>
  <tr height="2">
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="left" /></td>
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="right" /></td>
    </tr>
 </table>
<a name="wp98272"></a><p class="pBody">
In the Model window, choose <span style=" font-weight: bold;">Tools &gt; Load machine arch script</span> to load an existing machine architecture script.
</p>

<a name="MGCCIDPAttribute Specifications for Variables and Registers"></a>

<a name="wp98411"></a><h5 class="pHeading4">
  <a name="MGCCIDMHELP_MODEL_ATTRIBUTES"></a>


Attribute Specifications for Variables and Registers
</h5>



<a name="wp98412"></a><p class="pBody">
You can specify attributes for registers and PV variables.
</p>


<a name="wp98413"></a><p class="pBody">
To specify attributes:
</p>


<a name="wp98414"></a>
<ol start="1."><li class="LL1Seq">Select the model for which you need to specify the attributes.</li></ol>
<a name="wp98415"></a>
<ol start="2."><li class="LL1Seq">In the Model window, select the <span style=" font-weight: bold;">Extraction &gt; Attributes</span> tab.</li></ol>
<a name="wp98416"></a>
<ol start="3."><li class="LL1Seq">Specify the attributes of the registers and/or PV variables.</li></ol>
<a name="wp98417"></a>
<ol start="4."><li class="LL1Seq">For registers, optionally define the initialization procedures.</li></ol>



<a name="wp98419"></a><p class="pFigureTitle">
Figure 7&#8209;35. 


Attribute Tab


</p>
<div align="center"><img src="images/model_builder_attributes.gif" id="wp98941" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>



<a name="wp98541"></a><p class="pBodyRelative">

</p>
<div id="TableDivQz"></div>
<div align="center">


<a name="wp98474"></a><p class="pTableTitle">
Table 7&#8209;13. 


Vista Extraction Attributes Tab Options&#160;
</p>



<table border="1" cellpadding="5" cellspacing="0" id="wp98474table98469">
  <tr bgcolor="#CCCCCC"  align="center" valign="middle">
    <th>

<a name="wp98478"></a><p class="pTableHeading">
Field/Control
</p>
</th>

    <th>

<a name="wp98480"></a><p class="pTableHeading">
Description
</p>


</th>

    <th>

<a name="wp98556"></a><p class="pTableHeading">
Values
</p>


</th>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98482"></a><p class="pTableCell">
Type

</p>

</td>

    <td>


<a name="wp98484"></a><p class="pTableCell">
Specifies the context of the variable/register in the modeling process

</p>

</td>

    <td>


<a name="wp98558"></a><p class="pTableCell">
Register (r) or Variable (o)

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98486"></a><p class="pTableCell">
Name

</p>

</td>

    <td>


<a name="wp98488"></a><p class="pTableCell">
Specifies the register or variable name

</p>

</td>

    <td>


<a name="wp98560"></a><p class="pTableCell">
Legal identifier

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98490"></a><p class="pTableCell">
Kind

</p>

</td>

    <td>


<a name="wp98492"></a><p class="pTableCell">
Specifies the variable or register value type

</p>

</td>

    <td>


<a name="wp98562"></a><p class="pTableCell">
Number, Bit Field or Address

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp98494"></a><p class="pTableCell">
Init (Registers only)

</p>

</td>

    <td>


<a name="wp98496"></a><p class="pTableCell">
Dialog box that defines an initialization procedure for the register

</p>

</td>

    <td>

&#160;</td>


</tr>


</table>

</div>
<div id='EndTable'> </div>
<p class="pBodyRelative">
<br clear='left' class='Blank4Table' />


</p>





<a name="wp97179"></a><p class="pFigureTitle">
Figure 7&#8209;36. 


Register Initialization


</p>
<div align="center"><img src="images/model_builder_register_initialization.gif" id="wp98951" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>


<a name="MGCCIDPModel Accuracy and Validation"></a>

<a name="wp98642"></a><h5 class="pHeading4">
  


Model Accuracy and Validation
</h5>



<a name="wp98643"></a><p class="pBody">
To aid in evaluating the quality of the model and testbenches, Vista reports on the overall error of the learning. The error rate reflects the quality of learning of each function that is a component of the learned policies. The overall error is a mean of all function-related errors for the entire model. A high error percentage could imply low-quality learning and indicate that the process requires improvement either by adding more test benches or by a better definition of the model machine architecture. Refer to the &ldquo;<a href='javascript:oT("CRF","Chapter_Modeling_Phase41.html#wp98257");'>Machine Architecture Specification</a>&rdquo; for more details.
</p>

<a name="MGCCIDPReviewing the Learning Report"></a>

<a name="wp98644"></a><h5 class="pHeading4">
  


Reviewing the Learning Report
</h5>



<a name="wp98645"></a><p class="pBody">
Reports prepared in Vista illustrate both all observations and all assumed relationships used as a result of the Learning process. You have the ability to review these reports and indicate which, if any, relationship assumptions are not appropriate and should be removed. The learning can then be re-run with more fine-tuned direction.
</p>


<a name="wp98646"></a><p class="pBody">
Information in the Learning Report is color coded so that you can easily distinguish between successful results (green) and problematic ones (red).
</p>

<a name="MGCCIDPViewing a Learning Report"></a>

<a name="wp98741"></a><h6 class="pHeading5">
  


Viewing a Learning Report
</h6>



<a name="wp98671"></a><p class="pBody">
To view a Learning Report, double-click the required Learning Report under the Learned Model folder.
</p>

<a name="MGCCIDPDecision-Tree Analysis"></a>

<a name="wp98673"></a><h6 class="pHeading5">
  


Decision-Tree Analysis
</h6>



<a name="wp98674"></a><p class="pBody">
The notation dt(<span class="cReqRpl">number</span>) in the report, such as dt(4) or dt(8), represents a decision tree of the specified size (number of nodes). For example:
</p>


<a name="wp98675"></a><p class="pBody">
<span style=" font-weight: bold;">dt(4) - four-node decision tree</span>:
</p>


<a name="wp98676"></a><pre class="pCode">     switch &quot;command&quot; [333] </pre>


<a name="wp98677"></a><pre class="pCode">        /* 333 cases in the testbench, in which this node is evaluated */</pre>


<a name="wp98678"></a><pre class="pCode">     null: [0]</pre>


<a name="wp98679"></a><pre class="pCode">         then &quot;nan&quot; [0/0] nan+-0 </pre>


<a name="wp98680"></a><pre class="pCode">        /* 0 cases - no cases were in the testbench (&quot;nan&quot; - not a number)*/</pre>


<a name="wp98681"></a><pre class="pCode">     READ: [170]</pre>


<a name="wp98682"></a><pre class="pCode">         then &quot;2&quot; [170/0] 2+-0 </pre>


<a name="wp98683"></a><pre class="pCode">        /* 170 cases, 0 errors, and interval of size 0, with center at 2 */</pre>


<a name="wp98684"></a><pre class="pCode">     WRITE: [163]</pre>


<a name="wp98685"></a><pre class="pCode">         then &quot;1&quot; [163/0] 1+-0</pre>


<a name="wp98764"></a><pre class="pCode">     </pre>


<a name="wp98765"></a><pre class="pCode">     </pre>


<a name="wp98688"></a><p class="pBody">
<span style=" font-weight: bold;">dt(8) - eight-node decision tree</span>:
</p>


<a name="wp98689"></a><pre class="pCode">     switch &quot;command&quot; [333]</pre>


<a name="wp98690"></a><pre class="pCode">     null: [0]</pre>


<a name="wp98691"></a><pre class="pCode">         then &quot;nan&quot; [0/0] nan+-0 </pre>


<a name="wp98692"></a><pre class="pCode">     READ: [170]</pre>


<a name="wp98693"></a><pre class="pCode">         switch &quot;initial_data[25]&quot; [170]</pre>


<a name="wp98694"></a><pre class="pCode">         &#39;0&#39;: [133]</pre>


<a name="wp98695"></a><pre class="pCode">             then &quot;80000&quot; [133/0] 80000+-0</pre>


<a name="wp98696"></a><pre class="pCode">         &#39;1&#39;: [37]</pre>


<a name="wp98697"></a><pre class="pCode">             switch &quot;initial_data[6]&quot; [37]</pre>


<a name="wp98698"></a><pre class="pCode">             &#39;0&#39;: [17]</pre>


<a name="wp98699"></a><pre class="pCode">                 then &quot;7.941176e+04&quot; [17/2] 79411.8+-2352.94 </pre>


<a name="wp98700"></a><pre class="pCode">                    /* interval of size 2 * 2352.94, at center &quot;79411.8&quot; */</pre>


<a name="wp98701"></a><pre class="pCode">             &#39;1&#39;: [20]</pre>


<a name="wp98702"></a><pre class="pCode">                 then &quot;80000&quot; [20/0] 80000+-0</pre>


<a name="wp98703"></a><pre class="pCode">     WRITE: [163]</pre>


<a name="wp98704"></a><pre class="pCode">         then &quot;50000&quot; [163/0] 50000+-0</pre>


<a name="wp134303"></a><pre class="pCode">     </pre>




<script type="text/javascript" language="JavaScript1.2">
<!--
   PageTitle = "Extracting Power &#151;  State Based Method";
   PDFLinkTitle = "Extracting.Power...State.Based.Method"
   ThisTopic = "DecisionTreeAnalysis";
   CurrentFile = "Chapter_Modeling_Phase41.html";
   MGCSetDocumentVariables();
   MGCUpdateNavPane();
      MGCInsertRTFooter();
 // -->
 </script>



  </body>
</html>
