<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.2.1385" />
    <meta name="TEMPLATEBASE" content="mgc_ww_v2.1.078" />
    <meta name="LASTUPDATED" content="Tue Nov 27 10:02:48 2012" />
    <meta name="mgc_html_doctitle" content="Vista User's Manual" />
    <title>Cache</title>
<!-- Search Engine keywords -->
    <meta name="attributes" content=" doc.type.documentation.user,doc.type.documentation.ref,product.version.v3.5,product.name.vista"/>
<!-- JavaScript Files -->
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/file_list.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/breadcrumbs.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/docvars.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/topics.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhelp/wwhimpl/common/scripts/popup_window.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
      // Set reference to top level help frame
      //
      if (( window.name != "SearchTopic") && ( window.name != "PopupTopic"))
      {   var  WWHFrame = WWHGetWWHFrame(  ""); }
      else
      { var WWHFrame = eval("parent.parent"); }
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
    var  WWHFrame = eval("parent.parent");
	document.write(MGCGetInternalStyleSheet(1));
	document.write(MGCGetDocumentStyleSheet(0));
	document.write(MGCGetPGFStyleSheet(0));
    // -->
    </script>
  </head>


<body class="body" rightmargin="25" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">





 <script type="text/javascript" language="JavaScript1.2">
    <!--
      MGCInsertRTHeader(159);
    // -->
 </script>
 

<!--154,155,159-->
<!--EnDhEaDeR-->

<a name="MGCCIDPCache"></a>

<a name="wp17051"></a><h4 class="pHeading3">
  


Cache
  </h4>


<!--Cache-->


<br clear="all" />
<table border="0" cellpadding="0" cellspacing="0" width="80%" align="center">
  <tr valign="baseline">
    <td width="50" valign="top" background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg">&#160;</td>
    <td background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg"><span class="cNotesBlack">Note</span></td>
  </tr>
  <tr valign="top">
    <td width="50" valign="top"><img src="wwhelp/wwhimpl/common/images/nicon_note.jpg" /></td>
    <td valign="top">
            
<a name="wp17061"></a><p class="pnoteNote">
        	For an explanation of cases where it is necessary to use registers to specify &ldquo;cacheable&rdquo; and &ldquo;non-cacheable&rdquo; ranges, see <a href='javascript:oT("CRF","Chapter_Customizing_Gen_Models_new06.html#wp21541");'>&quot;Registers for Defining Cacheable and Non-cacheable Ranges&quot;</a>.
        </p>

          </td>
  </tr>
  <tr height="2">
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="left" /></td>
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="right" /></td>
    </tr>
 </table>
<a name="wp17065"></a><p class="pBody">
One of two configuration alternatives exist for using the Cache model:
</p>


<a name="wp17066"></a>
<ul><li class="LL1BulSolid">It can be placed between the CPU and the Bus. </li></ul>
<a name="wp123959"></a><p class="pL1Body">In this case, the cache has <span style=" font-weight: bold;">two Bus master ports</span>: </p>

<a name="wp123963"></a><ul><li class="LL2BulHollow">one (with slave side) to be connected to the master port of the CPU </li></ul>
<a name="wp123964"></a><ul><li class="LL2BulHollow">one (with master side) to be connected to the Bus</li></ul>
<a name="wp17067"></a>
<ul><li class="LL1BulSolid">(Default configuration reflected in the GUI forms) It can be placed between the Bus and the Memory. </li></ul>
<a name="wp123968"></a><p class="pL1Body">Here, the cache has<span style=" font-weight: bold;"> two Bus slave ports</span>: </p>

<a name="wp123972"></a><ul><li class="LL2BulHollow">one (with slave side) &#151;  to be connected to master port of the Bus -- through which the host issues the memory requests;</li></ul>
<a name="wp123973"></a><ul><li class="LL2BulHollow">one (with master side) &#151;  to be connected to the slave port of the Memory -- through which the cache passes requests for the memory.</li></ul><a name="MGCCIDPCache Parameters"></a>

<a name="wp17070"></a><h5 class="pHeading4">
  


Cache Parameters
</h5>



<a name="wp19417"></a><p class="pBody">
<span style=" font-weight: bold;">To edit cache parameters for a model based on the generic Cache model:</span>
</p>


<a name="wp18924"></a>
<ol start="1."><li class="LL1Seq">In the <span style=" font-weight: bold;">Modeling </span>window for the Cache model, select the <span style=" font-weight: bold;">PV</span> &gt; <span style=" font-weight: bold;">Parameters &gt; Auto-defined</span> tab.</li></ol>



<a name="wp18930"></a><p class="pFigureTitle">
Figure 8&#8209;4. 


Cache Model (PV) - Auto-Defined Parameters Tab


</p>
<div align="center"><img src="images/cache.gif" id="wp18928" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>



<a name="wp18944"></a>
<ol start="2."><li class="LL1Seq">Change default values as needed for the cache parameters. </li></ol>
<a name="wp21537"></a>
<ol start="3."><li class="LL1Seq">Click the <span style=" font-weight: bold;">Save </span>toolbar icon, or select <span style=" font-weight: bold;">File &gt; Save </span>to check and save the input values.</li></ol>
<a name="wp125725"></a><p class="pBodyRelative">

</p>
<div id="TableDivQz"></div>
<div align="center">


<a name="wp21471"></a><p class="pTableTitle">
Table 8&#8209;2. 


Cache Model - Auto-Defined Parameters Tab&#160;
</p>



<table border="1" cellpadding="5" cellspacing="0" id="wp21471table21464">
  <tr bgcolor="#CCCCCC"  align="center" valign="middle">
    <th>

<a name="wp21477"></a><p class="pTableHeading">
Field/Control
</p>
</th>

    <th>

<a name="wp21479"></a><p class="pTableHeading">
Description
</p>


</th>

    <th>

<a name="wp21481"></a><p class="pTableHeading">
Values
</p>


</th>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp21483"></a><p class="pTableCell">
cache_size 

</p>

</td>

    <td>


<a name="wp21485"></a><p class="pTableCell">
The cache size in bytes

</p>

</td>

    <td>


<a name="wp21487"></a><p class="pTableCell">
Integer (or parameter of type integer)

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp21489"></a><p class="pTableCell">
cache_line_size

</p>

</td>

    <td>


<a name="wp21491"></a><p class="pTableCell">
The total size of each line (in bytes). Line should be wider than 1 memory word, in order to exploit the principle of locality.

</p>

</td>

    <td>


<a name="wp21493"></a><p class="pTableCell">
Integer (or parameter of type integer)

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp21496"></a><p class="pTableCell">
cache_associativity

</p>

</td>

    <td>


<a name="wp21498"></a><p class="pTableCell">
Number of lines per set

</p>

</td>

    <td>


<a name="wp21500"></a><p class="pTableCell">
Integer (or parameter of type integer)

</p>


<a name="wp21501"></a><p class="pTableCell">
 1 - direct mapping

</p>


<a name="wp21502"></a><p class="pTableCell">
2 - 2-way set associative, 4 - 4-way set associative (same for 8, 16 etc&#39;)

</p>


<a name="wp21503"></a><p class="pTableCell">
Same value as the number of lines - fully associative

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp21505"></a><p class="pTableCell">
cache_critical_word_first

</p>

</td>

    <td>


<a name="wp21507"></a><p class="pTableCell">
See description below

</p>

</td>

    <td>


<a name="wp21509"></a><p class="pTableCell">
&ldquo;NONE&rdquo; / &ldquo;DEFAULT&rdquo; / &ldquo;WRAP_ARROUND&rdquo; /<br />&ldquo;EARLY_RESTART&rdquo; <br />(or parameter of type string)

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp21511"></a><p class="pTableCell">
cache_write_hit policy

</p>

</td>

    <td>


<a name="wp21513"></a><p class="pTableCell">
See description below

</p>

</td>

    <td>


<a name="wp21515"></a><p class="pTableCell">
&ldquo;WRITE_THROUGH&rdquo; / &ldquo;WRITE_BACK&rdquo; (or parameter of type string)

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp21517"></a><p class="pTableCell">
cache_write<br />_miss policy

</p>

</td>

    <td>


<a name="wp21519"></a><p class="pTableCell">
See description below

</p>

</td>

    <td>


<a name="wp21521"></a><p class="pTableCell">
&ldquo;ALLOC&rdquo; / &ldquo;NON_ALLOC&rdquo; (or parameter of type string)

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp21523"></a><p class="pTableCell">
cache_replacement<br />_policy

</p>

</td>

    <td>


<a name="wp21527"></a><p class="pTableCell">
(Used for Set Associative cache only) See description below

</p>

</td>

    <td>


<a name="wp21530"></a><p class="pTableCell">
&ldquo;RANDOM&rdquo; / &ldquo;PSEUDO_LRU&rdquo; / &ldquo;ROUND_ROBIN&rdquo; <br />(or parameter of type string)

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp21532"></a><p class="pTableCell">
&lt;input_port_name&gt;_latency

</p>

</td>

    <td>


<a name="wp21534"></a><p class="pTableCell">
Latency (in clocks) of the generated policy (see T-&gt;Timing tab)

</p>

</td>

    <td>


<a name="wp21536"></a><p class="pTableCell">
Integer (or parameter of type integer)

</p>

</td>


</tr>


</table>

</div>
<div id='EndTable'> </div>
<p class="pBodyRelative">
<br clear='left' class='Blank4Table' />


</p>


<a name="wp21550"></a><p class="pBody">
Options for <span style=" font-weight: bold;">cache_write_hit_policy</span> include: 
</p>


<a name="wp21551"></a>
<ul><li class="LL1BulSolid">&ldquo;WRITE_THROUGH&rdquo; - update memory on every cache write.</li></ul>
<a name="wp21552"></a>
<ul><li class="LL1BulSolid">&ldquo;WRITE_BACK&rdquo; - update memory only when needed: i.e., when the block has been changed in the cache, and we need to replace it.</li></ul>
<a name="wp21553"></a><p class="pBody">
Options for <span style=" font-weight: bold;">cache_write_miss_policy</span> include:
</p>


<a name="wp21554"></a>
<ul><li class="LL1BulSolid">&ldquo;ALLOC&rdquo; - on cache miss - write the block to the memory, and read back the line from the memory to cache. When writing to memory, there is high probability that words near the block, or the block itself, will be required soon.</li></ul>
<a name="wp21555"></a>
<ul><li class="LL1BulSolid">&ldquo;NON_ALLOC&rdquo; - on cache miss - only write the block to the memory.</li></ul>
<a name="wp21556"></a><p class="pBody">
<span style=" font-weight: bold;">cache_replacement_policy</span> addresses which line to replace on a cache miss for a full cache:
</p>


<a name="wp21557"></a>
<ul><li class="LL1BulSolid">&ldquo;PSEUDO_LRU&rdquo; - The block that will be removed from cache will be the block that was least recently used.</li></ul>
<a name="wp21558"></a>
<ul><li class="LL1BulSolid">&ldquo;RANDOM&rdquo; - The block that will be removed from cache will be chosen in random way. </li></ul>
<a name="wp21559"></a>
<ul><li class="LL1BulSolid">&ldquo;ROUND_ROBIN&rdquo; - The block that will be removed from cache will be chosen in circular order.</li></ul>
<a name="wp21560"></a><p class="pBody">
<span style=" font-weight: bold;">cache_critical_word_first</span> addresses the situation when the read of the whole line takes more time than the read of a particular word from the memory.
</p>


<a name="wp21561"></a>
<ul><li class="LL1BulSolid">&ldquo;NONE&rdquo; - The cache / snoop asks for the whole line from the memory. </li></ul>
<a name="wp21562"></a>
<ul><li class="LL1BulSolid">&ldquo;DEFAULT&rdquo; - The cache reads the critical word first, and send it back to the CPU. Then, it asks from the memory the rest of the line. </li></ul>
<a name="wp21563"></a>
<ul><li class="LL1BulSolid">&ldquo;WRAP_ARROUND&rdquo; - In this case, the rest of the line will be read in one burst (assuming that the critical word is in the middle of the line)</li></ul>
<a name="wp21564"></a>
<ul><li class="LL1BulSolid"> &ldquo;EARLY_RESTART&rdquo; - It&#39;s not necessary to wait until the cache block is completely read before restarting the processor. As soon as the requested word arrives, it can be forwarded to the CPU.</li></ul><a name="MGCCIDPRegisters for Defining Cacheable and Non-cacheable Ranges"></a>

<a name="wp21541"></a><h5 class="pHeading4">
  


Registers for Defining Cacheable and Non-cacheable Ranges
</h5>



<a name="wp21542"></a><p class="pBody">
The Cache maps the memory, for better access of the currently used data. Assuming that the cache is located between the CPU and the Bus (this configuration is the typical one): the CPU can read or write data from other devices (the memory or others) only through the cache. The problem occurs when the CPU needs to write to trigger registers in those devices. Because a copy of the data is saved in the cache, and because the CPU does not communicate with the real register (only with the saved data in the cache), the change of the data occurs only when the cache restores this data &ldquo;to the memory&rdquo; (in our example, the data will go back to the device).
</p>


<a name="wp17199"></a><p class="pBody">
In order to prevent this case, the model builder has added the ability to define and control &ldquo;cacheable&rdquo; address ranges and &ldquo;non-cacheable&rdquo; ranges. via three registers: Address, Size and Activate (see below for details). By default, the entire range is &ldquo;cacheable&rdquo;.
</p>


<a name="wp17200"></a>
<ul><li class="LL1BulSolid">If a range is &ldquo;cacheable&rdquo;, when the CPU accesses this range, the cache will be &ldquo;available&rdquo; for this range, and save a copy of the data in the cache.</li></ul>
<a name="wp17201"></a>
<ul><li class="LL1BulSolid">If a range is &ldquo;non-cacheable&rdquo;, when the CPU accesses this range, the cache will be &ldquo;unavailable&rdquo; for this range, and simply pass the request to the Bus (in this case, the cache actually functions as a simple bridge).</li></ul>
<a name="wp17202"></a><p class="pBody">
For example, in order to define the range 0-499 as cacheable, and 500-999 as non-cacheable, we need to write twice to the registers:
</p>


<a name="wp17203"></a><p class="pBody">
<span style=" font-weight: bold;">Address</span>: 0 - <span style=" font-weight: bold;">Size</span>: 500 - <span style=" font-weight: bold;">Activate</span>: 1
</p>


<a name="wp17204"></a><p class="pBody">
<span style=" font-weight: bold;">Address</span>: 500 - <span style=" font-weight: bold;">Size</span>: 500 - <span style=" font-weight: bold;">Activate</span>: 0
</p>


<a name="wp17205"></a><p class="pBody">
The <span style=" font-weight: bold;">Activate</span> register functions as a &ldquo;trigger&rdquo;: once a write action to the <span style=" font-weight: bold;">Activate</span> register has taken place, the cache refers to the <span style=" font-weight: bold;">Address</span> and <span style=" font-weight: bold;">Size</span> registers, and changes its internal state regarding the cacheable or non-cacheable ranges.
</p>




<script type="text/javascript" language="JavaScript1.2">
<!--
   PageTitle = "Cache";
   PDFLinkTitle = "Cache"
   ThisTopic = "RegistersforDefiningCacheableandNoncacheableRanges";
   CurrentFile = "Chapter_Customizing_Gen_Models_new06.html";
   MGCSetDocumentVariables();
   MGCUpdateNavPane();
      MGCInsertRTFooter();
 // -->
 </script>



  </body>
</html>
