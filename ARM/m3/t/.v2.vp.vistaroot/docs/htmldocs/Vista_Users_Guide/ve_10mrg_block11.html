<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.2.1385" />
    <meta name="TEMPLATEBASE" content="mgc_ww_v2.1.078" />
    <meta name="LASTUPDATED" content="Tue Nov 27 10:04:35 2012" />
    <meta name="mgc_html_doctitle" content="Vista User's Manual" />
    <title>Modifying the Generated Code</title>
<!-- Search Engine keywords -->
    <meta name="attributes" content=" doc.type.documentation.user,doc.type.documentation.ref,product.version.v3.5,product.name.vista"/>
<!-- JavaScript Files -->
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/file_list.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/breadcrumbs.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/docvars.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/topics.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhelp/wwhimpl/common/scripts/popup_window.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
      // Set reference to top level help frame
      //
      if (( window.name != "SearchTopic") && ( window.name != "PopupTopic"))
      {   var  WWHFrame = WWHGetWWHFrame(  ""); }
      else
      { var WWHFrame = eval("parent.parent"); }
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
    var  WWHFrame = eval("parent.parent");
	document.write(MGCGetInternalStyleSheet(1));
	document.write(MGCGetDocumentStyleSheet(0));
	document.write(MGCGetPGFStyleSheet(0));
    // -->
    </script>
  </head>


<body class="body" rightmargin="25" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">





 <script type="text/javascript" language="JavaScript1.2">
    <!--
      MGCInsertRTHeader(234);
    // -->
 </script>
 

<!--224,231,234-->
<!--EnDhEaDeR-->

<a name="MGCCIDPModifying the Generated Code"></a>

<a name="wp39342"></a><h4 class="pHeading3">
  


Modifying the Generated Code
  </h4>


<!--ModifyingtheGeneratedCode-->


<a name="wp39344"></a><p class="pBody">
Assume the following block diagram (below), and the generated code following it (without any user changes to the text).
</p>





<a name="wp40154"></a><p class="pFigureTitle">
Figure 9&#8209;8. 


Sample Block Diagram


</p>
<div align="center"><img src="images/simpletop1.gif" id="wp63596" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>



<a name="wp39348"></a><pre class="pCodeIndent">
           #pragma once</pre>

<a name="wp39349"></a><pre class="pCodeIndent">
           $includes_begin;</pre>

<a name="wp39350"></a><pre class="pCodeIndent">
           #include &lt;systemc.h&gt;</pre>

<a name="wp39351"></a><pre class="pCodeIndent">
           #include &quot;AHB_BUS_model.h&quot;</pre>

<a name="wp39352"></a><pre class="pCodeIndent">
           #include &quot;CPU_model.h&quot;</pre>

<a name="wp39353"></a><pre class="pCodeIndent">
           $includes_end;</pre>

<a name="wp39354"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39355"></a><pre class="pCodeIndent">
           $module_begin(&quot;SimpleTop&quot;);</pre>

<a name="wp39356"></a><pre class="pCodeIndent">
           SC_MODULE(SimpleTop) {</pre>

<a name="wp39357"></a><pre class="pCodeIndent">
           public:</pre>

<a name="wp39358"></a><pre class="pCodeIndent">
             SimpleTop(::sc_core::sc_module_name name):</pre>

<a name="wp39359"></a><pre class="pCodeIndent">
               ::sc_core::sc_module(name)</pre>

<a name="wp39360"></a><pre class="pCodeIndent">
               $initialization_begin</pre>

<a name="wp39361"></a><pre class="pCodeIndent">
           $init(&quot;bus_inst&quot;),</pre>

<a name="wp39362"></a><pre class="pCodeIndent">
           bus_inst(0)</pre>

<a name="wp39363"></a><pre class="pCodeIndent">
           $end</pre>

<a name="wp39364"></a><pre class="pCodeIndent">
           $init(&quot;CPU&quot;),</pre>

<a name="wp39365"></a><pre class="pCodeIndent">
           CPU(0)</pre>

<a name="wp39366"></a><pre class="pCodeIndent">
           $end</pre>

<a name="wp39367"></a><pre class="pCodeIndent">
               $initialization_end</pre>

<a name="wp39368"></a><pre class="pCodeIndent">
           {</pre>

<a name="wp39369"></a><pre class="pCodeIndent">
               $elaboration_begin;</pre>

<a name="wp39370"></a><pre class="pCodeIndent">
           $create_component(&quot;bus_inst&quot;);</pre>

<a name="wp39371"></a><pre class="pCodeIndent">
           bus_inst = new AHB_BUS_pvt(&quot;bus_inst&quot;);</pre>

<a name="wp39372"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39373"></a><pre class="pCodeIndent">
           $create_component(&quot;CPU&quot;);</pre>

<a name="wp39374"></a><pre class="pCodeIndent">
           CPU = new CPU_pvt(&quot;CPU&quot;);</pre>

<a name="wp39375"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39376"></a><pre class="pCodeIndent">
               $elaboration_end;</pre>

<a name="wp39377"></a><pre class="pCodeIndent">
             }</pre>

<a name="wp39378"></a><pre class="pCodeIndent">
             ~SimpleTop() {</pre>

<a name="wp39379"></a><pre class="pCodeIndent">
               $destructor_begin;</pre>

<a name="wp39380"></a><pre class="pCodeIndent">
           $destruct_component(&quot;bus_inst&quot;);</pre>

<a name="wp39381"></a><pre class="pCodeIndent">
           delete bus_inst; bus_inst = 0;</pre>

<a name="wp39382"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39383"></a><pre class="pCodeIndent">
           $destruct_component(&quot;CPU&quot;);</pre>

<a name="wp39384"></a><pre class="pCodeIndent">
           delete CPU; CPU = 0;</pre>

<a name="wp39385"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39386"></a><pre class="pCodeIndent">
               $destructor_end;</pre>

<a name="wp39387"></a><pre class="pCodeIndent">
             }</pre>

<a name="wp39388"></a><pre class="pCodeIndent">
           public:</pre>

<a name="wp39389"></a><pre class="pCodeIndent">
             $fields_begin;</pre>

<a name="wp39390"></a><pre class="pCodeIndent">
           $component(&quot;bus_inst&quot;);</pre>

<a name="wp39391"></a><pre class="pCodeIndent">
           AHB_BUS_pvt *bus_inst;</pre>

<a name="wp39392"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39393"></a><pre class="pCodeIndent">
           $component(&quot;CPU&quot;);</pre>

<a name="wp39394"></a><pre class="pCodeIndent">
           CPU_pvt *CPU;</pre>

<a name="wp39395"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39396"></a><pre class="pCodeIndent">
             $fields_end;</pre>

<a name="wp39397"></a><pre class="pCodeIndent">
           };</pre>

<a name="wp39398"></a><pre class="pCodeIndent">
           $module_end;</pre>
<a name="MGCCIDPPotential Code Modifications"></a>

<a name="wp39401"></a><h5 class="pHeading4">
  


Potential Code Modifications
</h5>



<a name="wp39403"></a><p class="pBody">
This section presents a number of possible modifications you can make to the code:
</p>


<a name="wp40214"></a>
<ol start="1."><li class="LL1Seq">Add some user code between components (have the code print some debug information to the <span style=" font-weight: bold;">cout</span> stream).</li></ol>
<a name="wp40215"></a>
<ol start="2."><li class="LL1Seq">Change the order of component creation (first create the bus and then the CPU).</li></ol>
<a name="wp40216"></a>
<ol start="3."><li class="LL1Seq">Add some condition code which changes the CPU component instance name:</li></ol>
<a name="wp40211"></a><pre class="pCodeIndent">
           If (1)  {</pre>

<a name="wp39410"></a><pre class="pCodeIndent">
              CPU = new CPU_pvt(&quot;CPU1&quot;); // create CPU1</pre>

<a name="wp39411"></a><pre class="pCodeIndent">
              } else {</pre>

<a name="wp39412"></a><pre class="pCodeIndent">
              CPU = new CPU_pvt(&quot;CPU2&quot;); // create CPU2</pre>

<a name="wp40204"></a><pre class="pCodeIndent">
              }<br />           </pre>

<a name="wp40206"></a>
<ol start="4."><li class="LL1Seq">Add a user-defined component (a component which is not a part of the graphical block diagram).</li></ol>
<a name="wp39416"></a><pre class="pCodeIndent">
                  MyClass *my_component;<br />           </pre>

<a name="wp39418"></a>
<ol start="5."><li class="LL1Seq">Add some method to the module:</li></ol>
<a name="wp39419"></a><pre class="pCodeIndent">
                    CPU_pvt *get_cpu();<br />           </pre>

<a name="wp39421"></a><p class="pBody">
As a result of the above changes, the original code will be modified and will look like this:
</p>


<a name="wp39423"></a><pre class="pCodeIndent">
           #pragma once</pre>

<a name="wp39424"></a><pre class="pCodeIndent">
           $includes_begin;</pre>

<a name="wp39425"></a><pre class="pCodeIndent">
           #include &lt;systemc.h&gt;</pre>

<a name="wp39426"></a><pre class="pCodeIndent">
           #include &quot;AHB_BUS_model.h&quot;</pre>

<a name="wp39427"></a><pre class="pCodeIndent">
           #include &quot;CPU_model.h&quot;</pre>

<a name="wp39428"></a><pre class="pCodeIndent">
           $includes_end;</pre>

<a name="wp39429"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39430"></a><pre class="pCodeIndent">
           $module_begin(&quot;SimpleTop&quot;);</pre>

<a name="wp39431"></a><pre class="pCodeIndent">
           SC_MODULE(SimpleTop) {</pre>

<a name="wp39432"></a><pre class="pCodeIndent">
           public:</pre>

<a name="wp39433"></a><pre class="pCodeIndent">
             SimpleTop(::sc_core::sc_module_name name):</pre>

<a name="wp39434"></a><pre class="pCodeIndent">
               ::sc_core::sc_module(name)</pre>

<a name="wp39435"></a><pre class="pCodeIndent">
               $initialization_begin</pre>

<a name="wp39436"></a><pre class="pCodeIndent">
           $init(&quot;bus_inst&quot;),</pre>

<a name="wp39437"></a><pre class="pCodeIndent">
           bus_inst(0)</pre>

<a name="wp39438"></a><pre class="pCodeIndent">
           $end</pre>

<a name="wp39439"></a><pre class="pCodeIndent">
           $init(&quot;CPU&quot;),</pre>

<a name="wp39440"></a><pre class="pCodeIndent">
           CPU(0)</pre>

<a name="wp39441"></a><pre class="pCodeIndent">
           $end</pre>

<a name="wp39442"></a><pre class="pCodeIndent">
               $initialization_end</pre>

<a name="wp39443"></a><pre class="pCodeIndent">
           {</pre>

<a name="wp39444"></a><pre class="pCodeIndent">
               $elaboration_begin;</pre>

<a name="wp39445"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39446"></a><pre class="pCodeIndent">
           cout &lt;&lt; &quot;Creating component&quot; &lt;&lt; &quot;CPU&quot; &lt;&lt; &quot;n&quot;;</pre>

<a name="wp39447"></a><pre class="pCodeIndent">
           $create_component(&quot;CPU&quot;);</pre>

<a name="wp39448"></a><pre class="pCodeIndent">
           if(1) {</pre>

<a name="wp39449"></a><pre class="pCodeIndent">
                   CPU = new CPU_pvt(&quot;CPU1&quot;); // create CPU1</pre>

<a name="wp39450"></a><pre class="pCodeIndent">
           } else {</pre>

<a name="wp39451"></a><pre class="pCodeIndent">
                   CPU = new CPU_pvt(&quot;CPU2&quot;); // create CPU2</pre>

<a name="wp39452"></a><pre class="pCodeIndent">
           }</pre>

<a name="wp39453"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39454"></a><pre class="pCodeIndent">
           cout &lt;&lt; &quot;Component&quot; &lt;&lt; &quot;CPU&quot; &lt;&lt; &quot;created&quot; &lt;&lt; &quot;\n&quot;;</pre>

<a name="wp39455"></a><pre class="pCodeIndent">
           cout &lt;&lt; &quot;Creating my component&quot; &lt;&lt; &quot;my_component&quot; &lt;&lt; &quot;\n&quot;;</pre>

<a name="wp39456"></a><pre class="pCodeIndent">
              my_component = new MyClass(&quot;my_component&quot;, 1, 2, 3);</pre>

<a name="wp39457"></a><pre class="pCodeIndent">
           cout &lt;&lt; &quot;my component&quot; &lt;&lt; &quot;created&quot;;</pre>

<a name="wp39458"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39459"></a><pre class="pCodeIndent">
           cout &lt;&lt; &quot;Creating component&quot; &lt;&lt; &quot;BUS&quot; &lt;&lt; &quot;\n&quot;;</pre>

<a name="wp39460"></a><pre class="pCodeIndent">
           $create_component(&quot;bus_inst&quot;);</pre>

<a name="wp39461"></a><pre class="pCodeIndent">
           bus_inst = new AHB_BUS_pvt(&quot;bus_inst&quot;);</pre>

<a name="wp39462"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39463"></a><pre class="pCodeIndent">
           cout &lt;&lt; &quot;Component&quot; &lt;&lt; &quot;BUS&quot; &lt;&lt; &quot;created&quot; &lt;&lt; &quot;\n&quot;;</pre>

<a name="wp39464"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39465"></a><pre class="pCodeIndent">
               $elaboration_end;</pre>

<a name="wp39466"></a><pre class="pCodeIndent">
             }</pre>

<a name="wp39467"></a><pre class="pCodeIndent">
             ~SimpleTop() {</pre>

<a name="wp39468"></a><pre class="pCodeIndent">
               $destructor_begin;</pre>

<a name="wp39469"></a><pre class="pCodeIndent">
           $destruct_component(&quot;bus_inst&quot;);</pre>

<a name="wp39470"></a><pre class="pCodeIndent">
           delete bus_inst; bus_inst = 0;</pre>

<a name="wp39471"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39472"></a><pre class="pCodeIndent">
           $destruct_component(&quot;CPU&quot;);</pre>

<a name="wp39473"></a><pre class="pCodeIndent">
           delete CPU; CPU = 0;</pre>

<a name="wp39474"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39475"></a><pre class="pCodeIndent">
               $destructor_end;</pre>

<a name="wp39476"></a><pre class="pCodeIndent">
             }</pre>

<a name="wp39477"></a><pre class="pCodeIndent">
           public:</pre>

<a name="wp39478"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39479"></a><pre class="pCodeIndent">
             // method returns the pointer to CPU component</pre>

<a name="wp39480"></a><pre class="pCodeIndent">
              CPU_pvt *get_cpu() const {</pre>

<a name="wp39481"></a><pre class="pCodeIndent">
                return CPU;</pre>

<a name="wp39482"></a><pre class="pCodeIndent">
              }</pre>

<a name="wp39483"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39484"></a><pre class="pCodeIndent">
             $fields_begin;</pre>

<a name="wp39485"></a><pre class="pCodeIndent">
           $component(&quot;bus_inst&quot;);</pre>

<a name="wp39486"></a><pre class="pCodeIndent">
           AHB_BUS_pvt *bus_inst;</pre>

<a name="wp39487"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39488"></a><pre class="pCodeIndent">
           MyClass *my_component;</pre>

<a name="wp39489"></a><pre class="pCodeIndent">
           $component(&quot;CPU&quot;);</pre>

<a name="wp39490"></a><pre class="pCodeIndent">
           CPU_pvt *CPU;</pre>

<a name="wp39491"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39492"></a><pre class="pCodeIndent">
             $fields_end;</pre>

<a name="wp39493"></a><pre class="pCodeIndent">
           };</pre>

<a name="wp39494"></a><pre class="pCodeIndent">
           $module_end;</pre>

<a name="wp39495"></a><pre class="pCodeIndent">
           </pre>

<a name="wp40263"></a><p class="pBody">
At this point, we will add a <span style=" font-weight: bold;">MEMORY_pvt </span>component, connect the sockets and save:
</p>





<a name="wp40167"></a><p class="pFigureTitle">
Figure 9&#8209;9. 


Adding Memory_PVT


</p>
<div align="center"><img src="images/simpletop2.gif" id="wp63603" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>



<a name="wp39502"></a><p class="pBody">
After the block diagram is saved, the generated code will looked as follows:
</p>


<a name="wp39504"></a><pre class="pCodeIndent">
           #pragma once</pre>

<a name="wp39505"></a><pre class="pCodeIndent">
           $includes_begin;</pre>

<a name="wp39506"></a><pre class="pCodeIndent">
           #include &lt;systemc.h&gt;</pre>

<a name="wp39507"></a><pre class="pCodeIndent">
           #include &quot;AHB_BUS_model.h&quot;</pre>

<a name="wp39508"></a><pre class="pCodeIndent">
           #include &quot;CPU_model.h&quot;</pre>

<a name="wp39509"></a><pre class="pCodeIndent">
           #include &quot;MEMORY_model.h&quot;</pre>

<a name="wp39510"></a><pre class="pCodeIndent">
           $includes_end;</pre>

<a name="wp39511"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39512"></a><pre class="pCodeIndent">
           $module_begin(&quot;SimpleTop&quot;);</pre>

<a name="wp39513"></a><pre class="pCodeIndent">
           SC_MODULE(SimpleTop) {</pre>

<a name="wp39514"></a><pre class="pCodeIndent">
           public:</pre>

<a name="wp39515"></a><pre class="pCodeIndent">
             SimpleTop(::sc_core::sc_module_name name):</pre>

<a name="wp39516"></a><pre class="pCodeIndent">
               ::sc_core::sc_module(name)</pre>

<a name="wp39517"></a><pre class="pCodeIndent">
               $initialization_begin</pre>

<a name="wp39518"></a><pre class="pCodeIndent">
           $init(&quot;bus_inst&quot;),</pre>

<a name="wp39519"></a><pre class="pCodeIndent">
           bus_inst(0)</pre>

<a name="wp39520"></a><pre class="pCodeIndent">
           $end</pre>

<a name="wp39521"></a><pre class="pCodeIndent">
           $init(&quot;CPU&quot;),</pre>

<a name="wp39522"></a><pre class="pCodeIndent">
           CPU(0)</pre>

<a name="wp39523"></a><pre class="pCodeIndent">
           $end</pre>

<a name="wp39524"></a><pre class="pCodeIndent">
           $init(&quot;Memory&quot;),</pre>

<a name="wp39525"></a><pre class="pCodeIndent">
           Memory(0)</pre>

<a name="wp39526"></a><pre class="pCodeIndent">
           $end</pre>

<a name="wp39527"></a><pre class="pCodeIndent">
               $initialization_end</pre>

<a name="wp39528"></a><pre class="pCodeIndent">
           {</pre>

<a name="wp39529"></a><pre class="pCodeIndent">
               $elaboration_begin;</pre>

<a name="wp39530"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39531"></a><pre class="pCodeIndent">
           cout &lt;&lt; &quot;Creating component&quot; &lt;&lt; &quot;CPU&quot; &lt;&lt; &quot;\n&quot;;</pre>

<a name="wp39532"></a><pre class="pCodeIndent">
           $create_component(&quot;CPU&quot;);</pre>

<a name="wp39533"></a><pre class="pCodeIndent">
           if(1) {</pre>

<a name="wp39534"></a><pre class="pCodeIndent">
                   CPU = new CPU_pvt(&quot;CPU1&quot;); // create CPU1</pre>

<a name="wp39535"></a><pre class="pCodeIndent">
           } else {</pre>

<a name="wp39536"></a><pre class="pCodeIndent">
                   CPU = new CPU_pvt(&quot;CPU2&quot;); // create CPU2</pre>

<a name="wp39537"></a><pre class="pCodeIndent">
           }</pre>

<a name="wp39538"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39539"></a><pre class="pCodeIndent">
           cout &lt;&lt; &quot;Component&quot; &lt;&lt; &quot;CPU&quot; &lt;&lt; &quot;created&quot; &lt;&lt; &quot;\n&quot;;</pre>

<a name="wp39540"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39541"></a><pre class="pCodeIndent">
           cout &lt;&lt; &quot;Creating my component&quot; &lt;&lt; &quot;my_component&quot; &lt;&lt; &quot;\n&quot;;</pre>

<a name="wp39542"></a><pre class="pCodeIndent">
              my_component = new MyClass(&quot;my_component&quot;, 1, 2, 3);</pre>

<a name="wp39543"></a><pre class="pCodeIndent">
           cout &lt;&lt; &quot;my component&quot; &lt;&lt; &quot;created&quot;;</pre>

<a name="wp39544"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39545"></a><pre class="pCodeIndent">
           cout &lt;&lt; &quot;Creating component&quot; &lt;&lt; &quot;BUS&quot; &lt;&lt; &quot;\n&quot;;</pre>

<a name="wp39546"></a><pre class="pCodeIndent">
           $create_component(&quot;bus_inst&quot;);</pre>

<a name="wp39547"></a><pre class="pCodeIndent">
           bus_inst = new AHB_BUS_pvt(&quot;bus_inst&quot;);</pre>

<a name="wp39548"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39549"></a><pre class="pCodeIndent">
           cout &lt;&lt; &quot;Component&quot; &lt;&lt; &quot;BUS&quot; &lt;&lt; &quot;created&quot; &lt;&lt; &quot;\n&quot;;</pre>

<a name="wp39550"></a><pre class="pCodeIndent">
           $create_component(&quot;Memory&quot;);</pre>

<a name="wp39551"></a><pre class="pCodeIndent">
           Memory = new MEMORY_pvt(&quot;Memory&quot;);</pre>

<a name="wp39552"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39553"></a><pre class="pCodeIndent">
           $bind(&quot;bus_inst-&gt;MEMslave&quot;,&quot;Memory-&gt;slave&quot;);</pre>

<a name="wp39554"></a><pre class="pCodeIndent">
           bus_inst-&gt;MEMslave.bind(Memory-&gt;slave);</pre>

<a name="wp39555"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39556"></a><pre class="pCodeIndent">
           $bind(&quot;CPU-&gt;master&quot;,&quot;bus_inst-&gt;CPUmaster&quot;);</pre>

<a name="wp39557"></a><pre class="pCodeIndent">
           CPU-&gt;master.bind(bus_inst-&gt;CPUmaster);</pre>

<a name="wp39558"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39559"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39560"></a><pre class="pCodeIndent">
               $elaboration_end;</pre>

<a name="wp39561"></a><pre class="pCodeIndent">
             }</pre>

<a name="wp39562"></a><pre class="pCodeIndent">
             ~SimpleTop() {</pre>

<a name="wp39563"></a><pre class="pCodeIndent">
               $destructor_begin;</pre>

<a name="wp39564"></a><pre class="pCodeIndent">
           $destruct_component(&quot;bus_inst&quot;);</pre>

<a name="wp39565"></a><pre class="pCodeIndent">
           delete bus_inst; bus_inst = 0;</pre>

<a name="wp39566"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39567"></a><pre class="pCodeIndent">
           $destruct_component(&quot;CPU&quot;);</pre>

<a name="wp39568"></a><pre class="pCodeIndent">
           delete CPU; CPU = 0;</pre>

<a name="wp39569"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39570"></a><pre class="pCodeIndent">
           $destruct_component(&quot;Memory&quot;);</pre>

<a name="wp39571"></a><pre class="pCodeIndent">
           delete Memory; Memory = 0;</pre>

<a name="wp39572"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39573"></a><pre class="pCodeIndent">
               $destructor_end;</pre>

<a name="wp39574"></a><pre class="pCodeIndent">
             }</pre>

<a name="wp39575"></a><pre class="pCodeIndent">
           public:</pre>

<a name="wp39576"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39577"></a><pre class="pCodeIndent">
             // method returns the pointer to CPU component</pre>

<a name="wp39578"></a><pre class="pCodeIndent">
                 CPU_pvt *get_cpu() const {</pre>

<a name="wp39579"></a><pre class="pCodeIndent">
                return CPU;</pre>

<a name="wp39580"></a><pre class="pCodeIndent">
              }</pre>

<a name="wp39581"></a><pre class="pCodeIndent">
           </pre>

<a name="wp39582"></a><pre class="pCodeIndent">
             $fields_begin;</pre>

<a name="wp39583"></a><pre class="pCodeIndent">
           $component(&quot;bus_inst&quot;);</pre>

<a name="wp39584"></a><pre class="pCodeIndent">
           AHB_BUS_pvt *bus_inst;</pre>

<a name="wp39585"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39586"></a><pre class="pCodeIndent">
           MyClass *my_component;</pre>

<a name="wp39587"></a><pre class="pCodeIndent">
           $component(&quot;CPU&quot;);</pre>

<a name="wp39588"></a><pre class="pCodeIndent">
           CPU_pvt *CPU;</pre>

<a name="wp39589"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39590"></a><pre class="pCodeIndent">
           $component(&quot;Memory&quot;);</pre>

<a name="wp39591"></a><pre class="pCodeIndent">
           MEMORY_pvt *Memory;</pre>

<a name="wp39592"></a><pre class="pCodeIndent">
           $end;</pre>

<a name="wp39593"></a><pre class="pCodeIndent">
             $fields_end;</pre>

<a name="wp39594"></a><pre class="pCodeIndent">
           };</pre>

<a name="wp39595"></a><pre class="pCodeIndent">
           $module_end;</pre>

<a name="wp39596"></a><pre class="pCode">     </pre>


<a name="wp39598"></a><p class="pBody">
The new <span style=" font-weight: bold;">Memory_pvt </span>component together with bind statement(s) are inserted into the source file together with the original and user-added code, both unchanged.
</p>




<script type="text/javascript" language="JavaScript1.2">
<!--
   PageTitle = "Modifying the Generated Code";
   PDFLinkTitle = "Modifying.the.Generated.Code"
   ThisTopic = "FIGUREAddingMemoryPVT";
   CurrentFile = "ve_10mrg_block11.html";
   MGCSetDocumentVariables();
   MGCUpdateNavPane();
      MGCInsertRTFooter();
 // -->
 </script>



  </body>
</html>
