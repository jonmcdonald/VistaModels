<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.2.1385" />
    <meta name="TEMPLATEBASE" content="mgc_ww_v2.1.078" />
    <meta name="LASTUPDATED" content="Tue Nov 27 10:01:17 2012" />
    <meta name="mgc_html_doctitle" content="Vista User's Manual" />
    <title>Identifiers for Tracing and Analyzing Data Flow</title>
<!-- Search Engine keywords -->
    <meta name="attributes" content=" doc.type.documentation.user,doc.type.documentation.ref,product.version.v3.5,product.name.vista"/>
<!-- JavaScript Files -->
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/file_list.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/breadcrumbs.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/docvars.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/topics.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhelp/wwhimpl/common/scripts/popup_window.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
      // Set reference to top level help frame
      //
      if (( window.name != "SearchTopic") && ( window.name != "PopupTopic"))
      {   var  WWHFrame = WWHGetWWHFrame(  ""); }
      else
      { var WWHFrame = eval("parent.parent"); }
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
    var  WWHFrame = eval("parent.parent");
	document.write(MGCGetInternalStyleSheet(1));
	document.write(MGCGetDocumentStyleSheet(0));
	document.write(MGCGetPGFStyleSheet(0));
    // -->
    </script>
  </head>


<body class="body" rightmargin="25" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">





 <script type="text/javascript" language="JavaScript1.2">
    <!--
      MGCInsertRTHeader(119);
    // -->
 </script>
 

<!--96,117,119-->
<!--EnDhEaDeR-->

<a name="MGCCIDPIdentifiers for Tracing and Analyzing Data Flow"></a>

<a name="wp33107"></a><h4 class="pHeading3">
  


Identifiers for Tracing and Analyzing Data Flow
  </h4>


<!--IdentifiersforTracingandAnalyzingDataFlow-->


<a name="wp34845"></a><p class="pBody">
<span style=" font-weight: regular; font-angle: normal;">The Vista model builder enables the user to understand how the data flows throughout the design. It does so using the notion of </span><span style=" font-style: italic;">tokens</span><span style=" font-weight: regular; font-angle: normal;">. A token is a data structure that is propagated throughout the design and marks all the transactions that result from a testbench transaction. A token has its associated unique </span><span style=" font-weight: bold; font-angle: normal;">tokenID</span><span style=" font-weight: regular; font-angle: normal;">. </span>
</p>


<a name="wp34847"></a><p class="pBody">
<span style=" font-weight: regular; font-angle: normal;">By default (that is, </span>performed by the PVT wrapper <span style=" font-weight: regular; font-angle: normal;">without the need for user intervention):</span>
</p>


<a name="wp34848"></a>
<ul><li class="LL1BulSolid"><span style=" font-weight: regular; font-angle: normal;">The PV testbench generates a unique token for each transaction that it initiates. This token is seen by the slave port that is connected to the testbench&#39;s master port.</span></li></ul>
<a name="wp42993"></a>
<ul><li class="LL1BulSolid"><span style=" font-weight: regular; font-angle: normal;">The PV models propagate the token of the slave transaction to all the master transactions generated by code that was invoked by the transaction; such as by the slave callback and by threads that were activated by calls to notify on mb_event (This is done by the PVT wrapper.)</span></li></ul>
<a name="wp42994"></a><p class="pBody">
<span style=" font-weight: regular; font-angle: normal;">These values of tokenID are reflected in the Transactions (Events) Report (see </span><a href='javascript:oT("CRF","analysis_ssource27.html");'>&quot;Transactions Report&quot;</a><span style=" font-weight: regular; font-angle: normal;">).</span>
</p>

<a name="MGCCIDPAdvanced Use of Tokens"></a>

<a name="wp43002"></a><h5 class="pHeading4">
  


Advanced Use of Tokens
</h5>



<a name="wp34163"></a><p class="pBody">
The user may modify how the operation works in the PV code by saving existing tokens, or by creating new tokens and setting them so that the propagation mechanism propagates the desired tokens. 
</p>

<a name="MGCCIDPSaving Existing Tokens"></a>

<a name="wp34071"></a><h6 class="pHeading5">
  


Saving Existing Tokens
</h6>



<a name="wp39384"></a><p class="pBody">
In order to obtain the last token that has been arrived from the last slave transaction, use the function:
</p>


<a name="wp39385"></a><pre class="pCodeIndent">
           get_current_token</pre>

<a name="wp119896"></a><pre class="pCodeIndent">
           </pre>

<a name="wp140020"></a><pre class="pCodeIndent">
           </pre>

<a name="wp33976"></a><p class="pBody">
For example:
</p>


<a name="wp119899"></a><pre class="pCode">     mb::mb_token_ptr TokenID = get_current_token();</pre>


<a name="wp119900"></a><pre class="pCode">     </pre>


<a name="wp39428"></a><p class="pBody">
Note that if this function is called before the first slave transaction, the <span style=" font-weight: bold;">mb_token_ptr</span> is the NULL pointer.
</p>

<a name="MGCCIDPCreating New Tokens"></a>

<a name="wp33981"></a><h6 class="pHeading5">
  


Creating New Tokens
</h6>



<a name="wp33983"></a><p class="pBody">
In order to create a new token, use the following type:
</p>


<a name="wp33985"></a><pre class="pCodeIndent">
           mb::mb_token</pre>

<a name="wp119904"></a><pre class="pCodeIndent">
           </pre>

<a name="wp33986"></a><p class="pBody">
For example:
</p>


<a name="wp33988"></a><pre class="pCodeIndent">
           mb::mb_token_ptr TokenID = new mb::mb_token();</pre>

<a name="wp119905"></a><pre class="pCodeIndent">
           </pre>

<a name="wp33993"></a><p class="pBody">
In order to set the token for the next master transactions (until a new slave transaction arrives), use the following function:
</p>


<a name="wp33995"></a><pre class="pCodeIndent">
           set_current_token</pre>

<a name="wp116040"></a><pre class="pCodeIndent">
           </pre>

<a name="wp33997"></a><p class="pBody">
For example:
</p>


<a name="wp33999"></a><pre class="pCodeIndent">
           set_current_token (TokenID);</pre>

<a name="wp119906"></a><pre class="pCodeIndent">
           </pre>

<a name="wp34000"></a><p class="pBody">
If a NULL pointer is sent, the request is ignored.
</p>

<a name="MGCCIDPFunctions for Managing Token Fields"></a>

<a name="wp39455"></a><h6 class="pHeading5">
  


Functions for Managing Token Fields
</h6>



<a name="wp43030"></a><p class="pBody">
The functions for token management, and descriptions of them, are in the file <span style=" font-style: italic;">mb/sa/saToken.h</span>. 
</p>


<a name="wp44126"></a><p class="pBody">
The following methods get values from tokens that were received through the slave (target) ports:
</p>


<a name="wp44829"></a><pre class="pCode">     bool hasField(const char *fieldname);</pre>


<a name="wp44830"></a><pre class="pCode">     void deleteField(consthas char *fieldname);</pre>


<a name="wp44831"></a><pre class="pCode">       </pre>


<a name="wp44832"></a><pre class="pCode">     int getFieldAsInt(const char *fieldname);</pre>


<a name="wp44833"></a><pre class="pCode">     unsigned getFieldAsUint(const char *fieldname);</pre>


<a name="wp44834"></a><pre class="pCode">     int64 getFieldAsInt64(const char *fieldname);</pre>


<a name="wp44835"></a><pre class="pCode">     uint64 getFieldAsUint64(const char *fieldname);</pre>


<a name="wp44836"></a><pre class="pCode">     double getFieldAsDouble(const char *fieldname);</pre>


<a name="wp44135"></a><pre class="pCode">     </pre>


<a name="wp44136"></a><p class="pBody">
The get_Field_As_String function always allocates the result using <span style=" font-weight: bold;">new [ ]</span>, and it must be deallocated using <span style=" font-weight: bold;">delete [ ]</span> when done. Otherwise, a memory leak occurs.
</p>


<a name="wp44137"></a><pre class="pCode">     char* getFieldAsString(const char *fieldname);</pre>


<a name="wp44138"></a><pre class="pCode">     </pre>


<a name="wp44139"></a><p class="pBody">
The setField function with a string value makes an internal copy of the string; therefore, you can pass in a local char *.
</p>


<a name="wp44140"></a><pre class="pCode">     void setField(const char *fieldname, const char *value);</pre>


<a name="wp44141"></a><pre class="pCode">     void setField(const char *fieldname, int value);</pre>


<a name="wp44142"></a><pre class="pCode">     </pre>


<a name="wp44143"></a><pre class="pCode">     void setField(const char *fieldname, unsigned int value);</pre>


<a name="wp44144"></a><pre class="pCode">     void setField(const char *fieldname, int64 value);</pre>


<a name="wp44145"></a><pre class="pCode">     </pre>


<a name="wp44146"></a><pre class="pCode">     void setField(const char *fieldname, uint64 value);</pre>


<a name="wp44147"></a><pre class="pCode">     void setField(const char *fieldname, double value);</pre>


<a name="wp44148"></a><pre class="pCode">     </pre>


<a name="wp44149"></a><p class="pBody">
In general, some information can be appended to the token. In order to do so, use the function setField. For example:
</p>


<a name="wp44150"></a><pre class="pCode">     TokenID-&gt;setField (&quot;origin&quot;, 1); </pre>


<a name="wp44237"></a><pre class="pCode">     </pre>


<a name="wp44152"></a><p class="pBody">
Use this function before sending the transactions. Then, in the target model, you can access this field to:
</p>


<a name="wp44246"></a>
<ul><li class="LL1BulSolid">Determine whether the token has this field (origin) by using the function has_Field</li></ul>
<a name="wp44154"></a>
<ul><li class="LL1BulSolid">Access the value of the field, using the function: get_Field_As_Int(&ldquo;origin&rdquo;) </li></ul>
<a name="wp44155"></a><p class="pBody">
In the following example, the field &ldquo;origin&rdquo; is set to an integer value; in general, it can be of any one of the following types: int, unsigned, int64, uin64, double, const char*.
</p>


<a name="wp44156"></a><pre class="pCode">     mb::mb_token_ptr TokenID = get_current_token ();</pre>


<a name="wp44157"></a><pre class="pCode">        if (TokenID)</pre>


<a name="wp44158"></a><pre class="pCode">           if (TokenID-&gt;hasField (&quot;origin&quot;))</pre>


<a name="wp44159"></a><pre class="pCode">              cout &lt;&lt; &quot;Incoming tokenId: &quot; &lt;&lt; TokenID-&gt;getID () </pre>


<a name="wp44160"></a><pre class="pCode">                 &lt;&lt; &quot;, origin=&quot; &lt;&lt; TokenID-&gt;getFieldAsInt (&quot;origin&quot;) &lt;&lt; endl;</pre>


<a name="wp44124"></a><pre class="pCode">     </pre>




<script type="text/javascript" language="JavaScript1.2">
<!--
   PageTitle = "Identifiers for Tracing and Analyzing Data Flow";
   PDFLinkTitle = "Identifiers.for.Tracing.and.Analyzing.Data.Flow"
   ThisTopic = "FunctionsforManagingTokenFields";
   CurrentFile = "Chapter_Modeling_Phase24.html";
   MGCSetDocumentVariables();
   MGCUpdateNavPane();
      MGCInsertRTFooter();
 // -->
 </script>



  </body>
</html>
