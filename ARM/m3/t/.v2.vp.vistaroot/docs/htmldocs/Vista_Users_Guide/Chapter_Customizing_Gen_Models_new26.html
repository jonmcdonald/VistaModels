<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.2.1385" />
    <meta name="TEMPLATEBASE" content="mgc_ww_v2.1.078" />
    <meta name="LASTUPDATED" content="Tue Nov 27 10:02:48 2012" />
    <meta name="mgc_html_doctitle" content="Vista User's Manual" />
    <title>QEMU Processors Features</title>
<!-- Search Engine keywords -->
    <meta name="attributes" content=" doc.type.documentation.user,doc.type.documentation.ref,product.version.v3.5,product.name.vista"/>
<!-- JavaScript Files -->
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/file_list.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/breadcrumbs.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/js/docvars.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/topics.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhelp/wwhimpl/common/scripts/popup_window.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
      // Set reference to top level help frame
      //
      if (( window.name != "SearchTopic") && ( window.name != "PopupTopic"))
      {   var  WWHFrame = WWHGetWWHFrame(  ""); }
      else
      { var WWHFrame = eval("parent.parent"); }
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
    <!--
    var  WWHFrame = eval("parent.parent");
	document.write(MGCGetInternalStyleSheet(1));
	document.write(MGCGetDocumentStyleSheet(0));
	document.write(MGCGetPGFStyleSheet(0));
    // -->
    </script>
  </head>


<body class="body" rightmargin="25" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">





 <script type="text/javascript" language="JavaScript1.2">
    <!--
      MGCInsertRTHeader(179);
    // -->
 </script>
 

<!--154,179,179-->
<!--EnDhEaDeR-->

<a name="MGCCIDPQEMU Processors Features"></a>

<a name="wp46620"></a><h3 class="pHeading2">
  


QEMU Processors Features
  </h3>


<a name="MGCCIDPCore Configuration and General Parameters "></a>

<a name="wp46657"></a><h4 class="pHeading3">
  


Core Configuration and General Parameters 
  </h4>


<!--CoreConfigurationandGeneralParameters-->


<a name="wp46658"></a><p class="pBody">
The following parameters may be specified with respect to a specific CPU core or with respect to the system. Please refer to a specific CPU documentation for more information about internal structure of a CPU model. For example, in Cortex A9 MP a core may be referenced as:
</p>


<a name="wp46659"></a><pre class="pCode">     cpu_inst.PV.cpu0.core.&lt;parameter_name&gt; = &lt;value&gt;</pre>

<a name="MGCCIDPLT/AT Simulation Mode"></a>

<a name="wp82503"></a><h5 class="pHeading4">
  


LT/AT Simulation Mode
</h5>



<a name="wp82504"></a><p class="pBody">
This parameter specifies the simulation mode as either LT or AT.
</p>


<a name="wp82505"></a><p class="pBody">
Example: 
</p>


<a name="wp82506"></a><pre class="pCode">     tlm_timing_model = LT</pre>

<a name="MGCCIDPClock"></a>

<a name="wp82563"></a><h5 class="pHeading4">
  


Clock
</h5>



<a name="wp46661"></a><p class="pBody">
This parameter specifies the core clock of the CPU.
</p>


<a name="wp46662"></a><p class="pBody">
Configuration example: 
</p>


<a name="wp46663"></a><pre class="pCode">     top.cpu0.clock = 10 ns (configure the clock for all CPU components)</pre>


<a name="wp46664"></a><pre class="pCode">     top.cpu0.PV.core.clock = 10 ns (configure the clock only for CPU core)</pre>

<a name="MGCCIDPpvt_lockstep Parameter"></a>

<a name="wp166239"></a><h5 class="pHeading4">
  


pvt_lockstep Parameter
</h5>



<a name="wp166240"></a><p class="pBody">
Define this parameter for each model initiator socket. 
</p>


<a name="wp166241"></a><p class="pBody">
This parameter can be specified as <span class="cReqRpl">socket_name</span>_pvt_lockstep or pvt_lockstep. The possible values are:
</p>


<a name="wp166242"></a>
<ul><li class="LL1BulSolid">SYNC_BEGIN &#151;  Despite the policies, block PV transaction until the corresponding T transaction starts.</li></ul>
<a name="wp166243"></a>
<ul><li class="LL1BulSolid">SYNC_END &#151;  Despite the policies, block PV transaction until the corresponding T transaction finishes. This causes full lockstep execution between PV and T.</li></ul>
<a name="wp166244"></a>
<ul><li class="LL1BulSolid">NO_SYNC &#151;  Enable blocking to be controlled by the policies.</li></ul>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="0" width="80%" align="center">
  <tr valign="baseline">
    <td width="50" valign="top" background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg">&#160;</td>
    <td background="wwhelp/wwhimpl/common/images/nbrule_upper.jpg"><span class="cNotesBlack">Note</span></td>
  </tr>
  <tr valign="top">
    <td width="50" valign="top"><img src="wwhelp/wwhimpl/common/images/nicon_note.jpg" /></td>
    <td valign="top">
            
<a name="wp166269"></a><p class="pnoteNote">
        	Values are case insensitive.<br />
        </p>

          </td>
  </tr>
  <tr height="2">
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="left" /></td>
    <td height="2" background="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg"><img src="wwhelp/wwhimpl/common/images/nbrule_bottom.jpg" align="right" /></td>
    </tr>
 </table>
<a name="wp166245"></a><p class="pBody">
Vista checks for the following parameters in order: <span class="cReqRpl">socket_name</span>_pvt_lockstep and pvt_lockstep; if neither is found, then NO_SYNC is used.
</p>


<a name="wp166246"></a><p class="pBody">
For example, the following causes SYNC_END to be used for the master socket:
</p>


<a name="wp166247"></a><pre class="pCode">     Top.inst.master.pvt_lockstep = SYNC_BEGIN</pre>


<a name="wp166248"></a><pre class="pCode">     Top.inst.master.master_pvt_lockstep = SYNC_END</pre>


<a name="wp166249"></a><pre class="pCode">     </pre>


<a name="wp166250"></a><p class="pBody">
The parameter has to be defined at the pvt instance level. Parameters defined at the PV or T level are ignored; for example:
</p>


<a name="wp166251"></a><pre class="pCode">     Top.inst.PV.pvt_lockstep = SYNC_BEGIN</pre>


<a name="wp166252"></a><pre class="pCode">     Top.inst.T.pvt_lockstep = SYNC_END</pre>


<a name="wp166253"></a><pre class="pCode">     </pre>

<a name="MGCCIDPCore RESET Behavior"></a>

<a name="wp92871"></a><h5 class="pHeading4">
  


Core RESET Behavior
</h5>



<a name="wp54274"></a>
<ul><li class="LL1BulSolid">RESET is active low.</li></ul>
<a name="wp54323"></a>
<ul><li class="LL1BulSolid">If RESET is not connected, the processor will start running from time 0. </li></ul>
<a name="wp54324"></a>
<ul><li class="LL1BulSolid">If RESET is connected but not initialized; that is, initialized by default as high &ldquo;true&rdquo;, the processor will start running from time 0. </li></ul>
<a name="wp54277"></a>
<ul><li class="LL1BulSolid">If RESET is initialized as low &ldquo;false&rdquo;, the processor will &ldquo;hold on&rdquo; until a high value is asserted, followed by the regular RESET sequence. </li></ul>
<a name="wp54278"></a>
<ul><li class="LL1BulSolid">If RESET gets a pulse while in simulation, the following will happen:</li></ul>
<a name="wp54279"></a><ol start="1."><li class="LL2Seq">On a &ldquo;true-&gt;false&rdquo; transition, execution will be interrupted after couple of instructions (as with IRQs) and the processor will be placed in the &ldquo;hold on&rdquo; mode.</li></ol>
<a name="wp54281"></a><ol start="2."><li class="LL2Seq">Then, on a &ldquo;false-&gt;true&rdquo; transition, the processor will resume from its initial state (reading SP and PC).</li></ol>
<a name="wp54282"></a><ol start="3."><li class="LL2Seq">If an ELF image was previously loaded, the starting address of the ELF will be restored as well.</li></ol>
<a name="wp54284"></a><p class="pBody">
The tracer was expanded by adding a new callback; <span style=" font-style: italic;">set_reset</span>. <span style=" font-style: italic;">MB_CORE_TRACE_RESET</span> and <span style=" font-style: italic;">MB_CORE_VERBOSE_RESET</span> are new defines. &ldquo;<span style=" font-weight: regular; font-angle: normal;">RESET</span>&rdquo; is a new verbose option, for example, verbose = IRQ|RESET.
</p>

<a name="MGCCIDPEndianness (endianness)"></a>

<a name="wp46666"></a><h5 class="pHeading4">
  


Endianness (endianness)
</h5>



<a name="wp46667"></a><p class="pBody">
The core endianness may be configured through this parameter, <span style=" font-style: italic;">big</span> or <span style=" font-style: italic;">little</span> values are supported.
</p>


<a name="wp46668"></a><p class="pBody">
Configuration example: 
</p>


<a name="wp46669"></a><pre class="pCode">     endianness = little (Global Configuration)</pre>


<a name="wp46670"></a><pre class="pCode">     top.mem0.endianness = big (Instance Configuration)</pre>

<a name="MGCCIDPInstruction Latency (instruction_latency)"></a>

<a name="wp46671"></a><h5 class="pHeading4">
  


Instruction Latency (instruction_latency)
</h5>



<a name="wp46672"></a><p class="pBody">
This parameter defines the latency consumed by each instruction. In unit delay mode, it is assumed that all instructions consume the same latency. If the timing is specified using timing policy tables, the value of this parameter is ignored. The default instruction latency is one clock cycle. (see <a href='javascript:oT("CRF","Chapter_Customizing_Gen_Models_new26.html#wp82563");'>Clock</a> parameter).
</p>


<a name="wp46673"></a><p class="pBody">
Configuration example: 
</p>


<a name="wp46674"></a><pre class="pCode">     Top.cpu_inst.PV.core.instruction_latency = 10 ns</pre>

<a name="MGCCIDPInstruction Energy (instruction_energy)"></a>

<a name="wp46675"></a><h5 class="pHeading4">
  


Instruction Energy (instruction_energy)
</h5>



<a name="wp46676"></a><p class="pBody">
This parameter defines the amount of energy consumed by each instruction. In unit delay mode, it is assumed that all instructions consume the same amount of energy (specified in joules). If the power is specified using power timing policy tables, the value of this parameter is ignored.
</p>


<a name="wp46677"></a><p class="pBody">
Configuration example:
</p>


<a name="wp46678"></a><pre class="pCode">     Top.cpu_inst.PV.core.instruction_energy = 10 nj</pre>

<a name="MGCCIDPLT Synch Quantum (lt_synch_quantum)"></a>

<a name="wp46679"></a><h5 class="pHeading4">
  


LT Synch Quantum (lt_synch_quantum)
</h5>



<a name="wp46680"></a><p class="pBody">
The greatest amount that an LT thread may run ahead of its simulation time before synchronization is forced.
</p>


<a name="wp46681"></a><p class="pBody">
Configuration example:
</p>


<a name="wp46682"></a><pre class="pCode">     lt_synch_quantum = 50000 ns</pre>

<a name="MGCCIDPVerbose"></a>

<a name="wp46684"></a><h5 class="pHeading4">
  


Verbose
</h5>



<a name="wp46685"></a><p class="pBody">
This parameter specifies verbosity mode of the CPU core. The value is a string containing an OR-d expression of string designators. For details, refer to the <a href='javascript:oT("CRF","Chapter_Customizing_Gen_Models_new26.html#wp27852");'>Core Debug Verbosity</a> section.
</p>

<a name="MGCCIDPVerbose File (verbose_file)"></a>

<a name="wp46686"></a><h5 class="pHeading4">
  


Verbose File (verbose_file)
</h5>



<a name="wp46687"></a><p class="pBody">
This parameter specifies a name of a file, for which all verbosity output is redirected to.
</p>

<a name="MGCCIDPCache Control (cache_control, icache_control, dcache_control)"></a>

<a name="wp46688"></a><h5 class="pHeading4">
  


Cache Control (cache_control, icache_control, dcache_control)
</h5>



<a name="wp46689"></a><p class="pBody">
The core models offered by Vista provide enhanced cache modeling, each cache model can be controlled through either software mode (Software running on the ISS) or hardware mode (through external parameters and dedicated API functions).
</p>


<a name="wp46690"></a><p class="pBody">
The cache control parameter controls which element is in charge of the cache control functionality and configurations.
</p>


<a name="wp46691"></a>
<ul><li class="LL1BulSolid"><span style=" font-weight: regular; font-angle: normal;">cache_control = software</span> </li></ul>
<a name="wp46840"></a><p class="pL1Body">Cache is exclusively controlled by the software running on the ISS.</p>

<a name="wp46692"></a>
<ul><li class="LL1BulSolid"><span style=" font-weight: regular; font-angle: normal;">cache_control = hardware</span> (Default)</li></ul>
<a name="wp46851"></a><p class="pL1Body">Cache is exclusively controlled by the cache hardware model.</p>

<a name="wp46693"></a><p class="pBody">
There are additional parameters used for specifying the cache control separately for data and instruction cache:
</p>


<a name="wp46694"></a>
<ul><li class="LL1BulSolid">icache_control - for instruction cache control mode,</li></ul>
<a name="wp46695"></a>
<ul><li class="LL1BulSolid">dcache_control - for data cache control mode.</li></ul>
<a name="wp46696"></a><p class="pBody">
When the cache is controlled by <span style=" font-style: italic;">software</span>, the ISS has an exclusive control on the following cache/memory attributes:
</p>


<a name="wp46697"></a>
<ul><li class="LL1BulSolid">Inner/Outer cacheablity</li></ul>
<a name="wp46698"></a>
<ul><li class="LL1BulSolid">Inner/Outer write-back/write-through</li></ul>
<a name="wp46699"></a>
<ul><li class="LL1BulSolid">Inner/Outer shareable</li></ul>
<a name="wp46700"></a>
<ul><li class="LL1BulSolid">Alloc/Non Alloc.</li></ul>
<a name="wp46701"></a><p class="pBody">
In this mode, cache model configuration parameters and APIs do not affect the simulation.
</p>


<a name="wp46702"></a><p class="pBody">
When the cache control is <span style=" font-style: italic;">hardware</span>, cache model configuration parameters and APIs (cache-&gt;set_enable(from, to), etc&#0133;) must be used.
</p>

<a name="MGCCIDPControlling the DMI (dma_enabled)"></a>

<a name="wp46703"></a><h5 class="pHeading4">
  


Controlling the DMI (dma_enabled)
</h5>



<a name="wp46704"></a><p class="pBody">
This parameter enables you to disable the DMI even in LT mode, causing the caches to be simulated. By default, the DMI is enabled in LT mode.
</p>

<a name="MGCCIDPControlling the MGC Semihosting (mgc_semihosting)"></a>

<a name="wp46705"></a><h5 class="pHeading4">
  


Controlling the MGC Semihosting (mgc_semihosting)
</h5>



<a name="wp46706"></a><p class="pBody">
This parameter allows to enable/disable MGC semihosting instruction support. MGC semihosting is enabled by default. When enabled, mb_* functions may be used in target software, even when the control page is not used (see also &ldquo;<span style=" font-style: italic;">mb/sw/control.h</span>&rdquo; and the <a href='javascript:oT("CRF","Chapter_Customizing_Gen_Models_new26.html#wp46863");'>Control Page Address (control_page_address)</a> section).
</p>

<a name="MGCCIDPControl Page Address (control_page_address)"></a>

<a name="wp46863"></a><h5 class="pHeading4">
  


Control Page Address (control_page_address)
</h5>



<a name="wp46707"></a><p class="pBody">
The control page address parameter defines the location of the free accessible page within the platform's memory map which is required by the simulation control and semi-hosting services.
</p>


<a name="wp46708"></a><p class="pBody">
Configuration example: 
</p>


<a name="wp46709"></a><pre class="pCode">     Top.cpu_inst.control_page_address = 0x20000000</pre>

<a name="MGCCIDPAngel Semihosting Parameters"></a>

<a name="wp46710"></a><h5 class="pHeading4">
  


Angel Semihosting Parameters
</h5>



<a name="wp46711"></a>
<ul><li class="LL1BulSolid">semihosting_enable - Enabling/disabling Angel semihosting.</li></ul>
<a name="wp46712"></a>
<ul><li class="LL1BulSolid">semihosting_cmd_line - The command line which will be passed to the main() function.</li></ul>
<a name="wp46713"></a>
<ul><li class="LL1BulSolid">semihosting_heap_base - Heap base address.</li></ul>
<a name="wp46714"></a>
<ul><li class="LL1BulSolid">semihosting_heap_limit - Heap end address</li></ul>
<a name="wp46715"></a>
<ul><li class="LL1BulSolid">semihosting_stack_base - Stack base address.</li></ul>
<a name="wp46716"></a>
<ul><li class="LL1BulSolid">semihosting_stack_limit - Stack end address.</li></ul>
<a name="wp46717"></a>
<ul><li class="LL1BulSolid">semihosting_clocks_per_sec - CLOCKS_PER_SEC value used in libc functions.</li></ul>
<a name="wp46718"></a>
<ul><li class="LL1BulSolid">semihosting_start_time - Initial time value (in seconds starting from 1/1/1970) of the time/date facilities of time() and clock() functions. By default, current host time is used.</li></ul>
<a name="wp46719"></a><p class="pBody">
Configuration example: 
</p>


<a name="wp46720"></a><pre class="pCode">     top.cpu0.PV.core.semihosting_enable = 1</pre>


<a name="wp46721"></a><pre class="pCode">     top.cpu0.PV.core.semihosting_cmd_line = -i input.txt -o output.txt top.cpu0.PV.core.semihosting_heap_base&quot; = 0x00000000</pre>


<a name="wp46722"></a><pre class="pCode">     top.cpu0.PV.core.semihosting_heap_limit&quot; = 0x0F000000</pre>


<a name="wp46723"></a><pre class="pCode">     top.cpu0.PV.core.semihosting_stack_base&quot;= 0x10000000 </pre>


<a name="wp46724"></a><pre class="pCode">     top.cpu0.PV.core.semihosting_stack_limit&quot; = 0x0F000000 top.cpu0.PV.core.semihosting_clocks_per_sec&quot; = 100;</pre>

<a name="MGCCIDPTiming and Power Tables (&lt;ARCH&gt;_timing, &lt;ARCH&gt;_power)"></a>

<a name="wp46726"></a><h5 class="pHeading4">
  


Timing and Power Tables (&lt;ARCH&gt;_timing, &lt;ARCH&gt;_power)
</h5>



<a name="wp46727"></a>
<ul><li class="LL1BulSolid">&lt;ARHC&gt;_timing</li></ul>
<a name="wp46901"></a><p class="pL1Body">Path to a file containing a table describing ARCH timing policy specified in Prolog.</p>

<a name="wp46728"></a>
<ul><li class="LL1BulSolid">&lt;ARHC&gt;_power</li></ul>
<a name="wp46905"></a><p class="pL1Body">Path to a file containing a table describing ARCH power policy specified in Prolog.</p>

<a name="wp46729"></a><p class="pBody">
The <span style=" font-weight: regular; font-angle: normal;">ARCH</span> value is instruction set dependant. The following ARCH values are supported:
</p>


<a name="wp46730"></a>
<ul><li class="LL1BulSolid">&ldquo;v7m&rdquo; - thumb architecture, used in Cotrex M3</li></ul>
<a name="wp46731"></a>
<ul><li class="LL1BulSolid">&ldquo;arm&rdquo; - 32 bit ARM instruction set</li></ul>
<a name="wp46732"></a>
<ul><li class="LL1BulSolid">thumb - 16 bit ARM instruction set</li></ul>
<a name="wp46733"></a>
<ul><li class="LL1BulSolid">&ldquo;ppc32&rdquo; - 32 bit PPC ISA.</li></ul><a name="MGCCIDPELF Image File (elf_image_file)"></a>

<a name="wp46734"></a><h5 class="pHeading4">
  


ELF Image File (elf_image_file)
</h5>



<a name="wp46735"></a><p class="pBody">
An ELF image file is loaded to the memory after the elaboration phase has been successfully completed; the core loads an executable image which is simulated following the boot sequence. You may specify the path to the relevant image binary through the <span style=" font-style: italic;">elf_image_file </span>parameter.
</p>


<a name="wp46736"></a><p class="pBody">
Configuration example: 
</p>


<a name="wp46737"></a><pre class="pCode">     Top.cpu_inst.PV.elf_image_file = sw/example1.x</pre>


<a name="wp166025"></a><pre class="pCode">     </pre>

<a name="MGCCIDPELF Image Flags (elf_image_flags)"></a>

<a name="wp166031"></a><h5 class="pHeading4">
  


ELF Image Flags (elf_image_flags)
</h5>



<a name="wp166032"></a><p class="pBody">
The elf_image_flags parameter can be used together with the elf_image_file parameter. The parameter can have the following values:
</p>


<a name="wp166033"></a>
<ul><li class="LL1BulSolid">LMA_LOAD: (default) use paddr field (physical address field)</li></ul>
<a name="wp166034"></a>
<ul><li class="LL1BulSolid">VMA_LOAD: use vaddr field (virtual address field)</li></ul><a name="MGCCIDPGDB Stub Port (gdbstub_port)"></a>

<a name="wp46738"></a><h5 class="pHeading4">
  


GDB Stub Port (gdbstub_port)
</h5>



<a name="wp46739"></a><p class="pBody">
The parameter defines the GDB stub port in which connection is established to the SW debugger. Whenever the parameter is assigned a value other than zero, the simulation stops after the elaboration phase and waits till a connection to an external software debugger has been established; for example, Edge, GDB. From that moment the software debugger is in full control over the processor model.
</p>


<a name="wp46740"></a><p class="pBody">
Configuration example: 
</p>


<a name="wp46741"></a><pre class="pCode">     Top.cpu_inst.PV.gdbstub_port = 1234</pre>

<a name="MGCCIDPSemi Hosting"></a>

<a name="wp46650"></a><h5 class="pHeading4">
  


Semi Hosting
</h5>



<a name="wp27820"></a><p class="pBody">
Vista QEMU based cores provides semi hosting and various simulation control API, 
</p>


<a name="wp27821"></a><p class="pBody">
The following semi hosting and simulation control functions are available.
</p>


<a name="wp125913"></a><p class="pBodyRelative">

</p>
<div id="TableDivQz"></div>
<div align="center">


<a name="wp29899"></a><p class="pTableTitle">
Table 8&#8209;8. 


Semi-Hosting API&#160;
</p>



<table border="1" cellpadding="5" cellspacing="0" id="wp29899table29897">
  <tr align="left" valign="top">
    <td>


<a name="wp29907"></a><p class="pTableCell">
STATIC_INLINE void
</p>
</td>

    <td>


<a name="wp29909"></a><p class="pTableCell">
<span style=" font-weight: bold;">mb_set_tlm_mode</span> (unsigned int mode)

</p>


<a name="wp29910"></a><p class="pTableCell">
Set the simulation TLM mode (LT\AT)

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp29912"></a><p class="pTableCell">
STATIC_INLINE void

</p>

</td>

    <td>


<a name="wp29914"></a><p class="pTableCell">
<span style=" font-weight: bold;">mb_stop</span> (unsigned int exit_code)

</p>


<a name="wp29915"></a><p class="pTableCell">
Finish the simulation by calling to the sc_stop() function. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp29917"></a><p class="pTableCell">
STATIC_INLINE unsigned int

</p>

</td>

    <td>


<a name="wp29919"></a><p class="pTableCell">
<span style=" font-weight: bold;">mb_get_tlm_mode</span> (void)

</p>


<a name="wp29920"></a><p class="pTableCell">
Return current simulation TLM mode (LT\AT)

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp29922"></a><p class="pTableCell">
STATIC_INLINE void

</p>

</td>

    <td>


<a name="wp29924"></a><p class="pTableCell">
<span style=" font-weight: bold;">mb_core_print</span> (unsigned int value)

</p>


<a name="wp29925"></a><p class="pTableCell">
Print the specified integer value to the host standard output. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp29927"></a><p class="pTableCell">
STATIC_INLINE void

</p>

</td>

    <td>


<a name="wp29929"></a><p class="pTableCell">
<span style=" font-weight: bold;">mb_core_message</span> (const char *value)

</p>


<a name="wp29930"></a><p class="pTableCell">
Print the specified string to the host standard output. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp29932"></a><p class="pTableCell">
STATIC_INLINE void

</p>

</td>

    <td>


<a name="wp29934"></a><p class="pTableCell">
<span style=" font-weight: bold;">mb_core_stop</span> (unsigned int value)

</p>


<a name="wp29935"></a><p class="pTableCell">
Stop the execution of the current ISS core. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp29937"></a><p class="pTableCell">
STATIC_INLINE void

</p>

</td>

    <td>


<a name="wp29939"></a><p class="pTableCell">
<span style=" font-weight: bold;">mb_core_set_lt_quantum</span> (unsigned int cycles)

</p>


<a name="wp29940"></a><p class="pTableCell">
Specify LT local quantum for this ISS core. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp29942"></a><p class="pTableCell">
STATIC_INLINE void

</p>

</td>

    <td>


<a name="wp29944"></a><p class="pTableCell">
<span style=" font-weight: bold;">mb_core_set_verbose_mode</span> (unsigned int mode)

</p>


<a name="wp29945"></a><p class="pTableCell">
Set verbose mode for the ISS core. For a list of possible values, see below.

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp29947"></a><p class="pTableCell">
STATIC_INLINE unsigned int

</p>

</td>

    <td>


<a name="wp29949"></a><p class="pTableCell">
<span style=" font-weight: bold;">mb_core_get_verbose_mode</span> (void)

</p>


<a name="wp29950"></a><p class="pTableCell">
Return current verbose mode of the ISS core. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp29952"></a><p class="pTableCell">
STATIC_INLINE void

</p>

</td>

    <td>


<a name="wp29954"></a><p class="pTableCell">
<span style=" font-weight: bold;">mb_core_enter_debug_mode</span> (void)

</p>


<a name="wp29955"></a><p class="pTableCell">
Activate debug mode of the ISS core. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp29957"></a><p class="pTableCell">
STATIC_INLINE void

</p>

</td>

    <td>


<a name="wp29959"></a><p class="pTableCell">
<span style=" font-weight: bold;">mb_core_leave_debug_mode</span> (void)

</p>


<a name="wp29960"></a><p class="pTableCell">
Cancel the debug mode. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp29962"></a><p class="pTableCell">
STATIC_INLINE void

</p>

</td>

    <td>


<a name="wp29964"></a><p class="pTableCell">
<span style=" font-weight: bold;">mb_core_wait</span> (unsigned int cycles)

</p>


<a name="wp29965"></a><p class="pTableCell">
Force the ISS core to synchronize with global SystemC simulation time and wait the specified amount of cycles.

</p>

</td>


</tr>


</table>

</div>
<div id='EndTable'> </div>
<p class="pBodyRelative">
<br clear='left' class='Blank4Table' />


</p>


<a name="wp46934"></a><p class="pBody">
The following values may be used with <span style=" font-style: italic;">mb_core_set_verbose_mode</span> and <span style=" font-style: italic;">mb_core_get_verbose_mode</span> functions:
</p>


<a name="wp46935"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_IRQ - Anytime an IRQ level changes.</li></ul>
<a name="wp46936"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_READ_BEGIN - A message is printed at the beginning of a read transaction.</li></ul>
<a name="wp46937"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_READ_END - A message is printed when the read transaction ends.</li></ul>
<a name="wp46938"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_READ - A message is printed at the beginning and at the end of a read transaction.</li></ul>
<a name="wp46939"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_WRITE_BEGIN - A message is printed at the beginning of a write transaction.</li></ul>
<a name="wp46940"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_WRITE_END - A message is printed when the write transaction ends.</li></ul>
<a name="wp46941"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_WRITE - A message is printed at the beginning and at the end of a read transaction.</li></ul>
<a name="wp46942"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_READ_WRITE - A message is printed on any read or write event.</li></ul>
<a name="wp46943"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_LT_CALLBACK - A message is printed on LT synchronization event (LT quantum keeper is expired).</li></ul>
<a name="wp46944"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_AT_CALLBACK: A message is printed after each basic ISS sw block has been synchronized (AT MODE only)</li></ul>
<a name="wp46945"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_READ_DBG_BEGIN - A message is printed at the beginning of a debug read transaction.</li></ul>
<a name="wp46946"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_READ_DBG_END - A message is printed when the debug read transaction ends.</li></ul>
<a name="wp46947"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_READ_DBG - A message is printed at the beginning and at the end of a debug read transaction.</li></ul>
<a name="wp46948"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_WRITE_DBG_BEGIN - A message is printed at the beginning of a debug write transaction.</li></ul>
<a name="wp46949"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_WRITE_DBG_END - A message is printed when the debug write transaction ends.</li></ul>
<a name="wp46950"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_WRITE_DBG - A message is printed at the beginning and at the end of a debug write transaction.</li></ul>
<a name="wp46951"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_READ_DBG_WRITE_DBG - A message is printed on any debug read or write event.</li></ul>
<a name="wp46952"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_STATE - A message is printed anytime the core shifts between HALT and EXEC modes.</li></ul>
<a name="wp46953"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_INSTRUCTIONS - A message is printed on each instruction which is executed.</li></ul>
<a name="wp46954"></a>
<ul><li class="LL1BulSolid">MB_CORE_VERBOSE_ALL</li></ul>
<a name="wp46932"></a><p class="pBody">
For a complete functional description, refer to the cache control reference manual which can be found under Vista documentation: <span style=" font-style: italic;">(vista_installation_directory</span><span style=" font-weight: regular; font-style: italic;">/docs/model_builder/apirefs/html/control_8h.html)</span>
</p>

<a name="MGCCIDPCore Debug Verbosity"></a>

<a name="wp27852"></a><h5 class="pHeading4">
  


Core Debug Verbosity
</h5>



<a name="wp27853"></a><p class="pBody">
The core model provides informative debug messages; a user can control the verbosity level and the type of the required debug information. 
</p>


<a name="wp27854"></a><p class="pBody">
The verbosity level and category can be controlled by the hardware model (through the relevant configuration file) or through the software running on the ISS.
</p>


<a name="wp46984"></a><p class="pBody">
The following values (or any OR-d combination) may be used as a value of core's <span style=" font-style: italic;">verbose</span> parameter.
</p>


<a name="wp27856"></a>
<ul><li class="LL1BulSolid">NONE - Core verbosity is disabled</li></ul>
<a name="wp27857"></a>
<ul><li class="LL1BulSolid">IRQ - Anytime an IRQ level changes</li></ul>
<a name="wp27858"></a>
<ul><li class="LL1BulSolid">READ_BEGIN - A message is printed at the beginning of a read transaction </li></ul>
<a name="wp27859"></a>
<ul><li class="LL1BulSolid">READ_END - A message is printed when the read transaction ends</li></ul>
<a name="wp27860"></a>
<ul><li class="LL1BulSolid">READ - A message is printed at the beginning and at the end of a read transaction</li></ul>
<a name="wp27861"></a>
<ul><li class="LL1BulSolid">WRITE_BEGIN - A message is printed at the beginning of a write transaction </li></ul>
<a name="wp27862"></a>
<ul><li class="LL1BulSolid">WRITE_END - A message is printed when the write transaction ends</li></ul>
<a name="wp27863"></a>
<ul><li class="LL1BulSolid">WRITE - A message is printed at the beginning and at the end of a read transaction</li></ul>
<a name="wp27864"></a>
<ul><li class="LL1BulSolid">READ_WRITE - A message is printed on any read or write event</li></ul>
<a name="wp27865"></a>
<ul><li class="LL1BulSolid">LT_CALLBACK - A message is printed on LT synchronization event (LT quantum keeper is expired)</li></ul>
<a name="wp27866"></a>
<ul><li class="LL1BulSolid">AT_CALLBACK - A message is printed after each basic ISS sw block has been synchronized (AT MODE only)</li></ul>
<a name="wp27867"></a>
<ul><li class="LL1BulSolid">READ_DBG_BEGIN - A message is printed at the beginning of a debug read transaction</li></ul>
<a name="wp27868"></a>
<ul><li class="LL1BulSolid">READ_DBG_END - A message is printed when the debug read transaction ends</li></ul>
<a name="wp27869"></a>
<ul><li class="LL1BulSolid">READ_DBG - A message is printed at the beginning and at the end of a debug read transaction</li></ul>
<a name="wp27870"></a>
<ul><li class="LL1BulSolid">WRITE_DBG_BEGIN - A message is printed at the beginning of a debug write transaction</li></ul>
<a name="wp27871"></a>
<ul><li class="LL1BulSolid">WRITE_DBG_END - A message is printed when the debug write transaction ends</li></ul>
<a name="wp27872"></a>
<ul><li class="LL1BulSolid">WRITE_DBG - A message is printed at the beginning and at the end of a debug write transaction</li></ul>
<a name="wp27873"></a>
<ul><li class="LL1BulSolid">READ_DBG_WRITE_DBG - A message is printed on any debug read or write event</li></ul>
<a name="wp27874"></a>
<ul><li class="LL1BulSolid">STATE - A message is printed anytime the core shifts between HALT and EXEC modes</li></ul>
<a name="wp27875"></a>
<ul><li class="LL1BulSolid">INSTRUCTIONS: A message is printed on each instruction which is executed </li></ul>
<a name="wp27876"></a>
<ul><li class="LL1BulSolid">ALL</li></ul>
<a name="wp27878"></a><p class="pBody">
Configuration example: 
</p>


<a name="wp27879"></a><pre class="pCode">     top.cpu0.PV.core.verbose = ALL</pre>


<a name="wp27880"></a><pre class="pCode">     top.cpu0.PV.core.verbose = READ_DBG_BEGIN | READ_DBG_END</pre>

<a name="MGCCIDPCore Tracing API"></a>

<a name="wp27906"></a><h5 class="pHeading4">
  


Core Tracing API
</h5>



<a name="wp27907"></a><p class="pBody">
The core models offered by Vista provide an enhanced tracing mechanism in which you may use a pre defined set of callbacks on significant core events, for instance you may receive a callback when the core has initiated a read transaction, or each time the core has entered sleep mode.
</p>


<a name="wp27908"></a><p class="pBody">
Normally the Core Trace API functionality is used for advanced statistical information gathering, and for enhanced debugging.
</p>


<a name="wp27909"></a><p class="pBody">
The following events\callbacks may be monitored by the core trace API:
</p>
<div id="TableDivQz"></div>
<div align="center">


<a name="wp29976"></a><p class="pTableTitle">
Table 8&#8209;9. 


Core Trace API&#160;
</p>



<table border="1" cellpadding="5" cellspacing="0" id="wp29976table29974">
  <tr align="left" valign="top">
    <td>


<a name="wp29984"></a><p class="pTableCell">
virtual void
</p>
</td>

    <td>


<a name="wp30268"></a><p class="pTableCell">
<span style=" font-weight: bold;">set_irq_level</span> (int irq, bool level)

</p>


<a name="wp30269"></a><p class="pTableCell">
Called when an IRQ signal is changed. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30063"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30275"></a><p class="pTableCell">
<span style=" font-weight: bold;">read_begin</span> (uint64_t addr, unsigned size)

</p>


<a name="wp30276"></a><p class="pTableCell">
Called when a read transaction begins. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30067"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30282"></a><p class="pTableCell">
<span style=" font-weight: bold;">read_end</span> (uint64_t addr, unsigned size, uint64_t value)

</p>


<a name="wp30283"></a><p class="pTableCell">
Called when a read transaction ends. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30071"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30289"></a><p class="pTableCell">
<span style=" font-weight: bold;">write_begin</span> (uint64_t addr, unsigned size, uint64_t value)

</p>


<a name="wp30290"></a><p class="pTableCell">
Called when a write transaction begins. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30075"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30296"></a><p class="pTableCell">
<span style=" font-weight: bold;">write_end</span> (uint64_t addr, unsigned size, uint64_t value)

</p>


<a name="wp30297"></a><p class="pTableCell">
Called when a write transaction ends. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30079"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30303"></a><p class="pTableCell">
<span style=" font-weight: bold;">debug_read_begin</span> (uint64_t addr, unsigned size)

</p>


<a name="wp30304"></a><p class="pTableCell">
Called when a debug read transaction begins. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30083"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30310"></a><p class="pTableCell">
<span style=" font-weight: bold;">debug_read_end</span> (uint64_t addr, unsigned size, uint64_t value)

</p>


<a name="wp30311"></a><p class="pTableCell">
Called when a debug read transaction ends. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30087"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30317"></a><p class="pTableCell">
<span style=" font-weight: bold;">debug_write_begin</span> (uint64_t addr, unsigned size, uint64_t value)

</p>


<a name="wp30318"></a><p class="pTableCell">
Called when a debug write transaction begins. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30091"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30324"></a><p class="pTableCell">
<span style=" font-weight: bold;">debug_write_end</span> (uint64_t addr, unsigned size, uint64_t value)

</p>


<a name="wp30325"></a><p class="pTableCell">
Called when a debug write transaction ends. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30107"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30331"></a><p class="pTableCell">
<span class="cP12"><span style=" font-weight: bold; font-angle: normal; vertical-align: baseline; color:#000000;">wait_for_interrupt_begin ()</span></span>

</p>


<a name="wp30332"></a><p class="pTableCell">
Called when a SLEEP mode is initiated. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30112"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30338"></a><p class="pTableCell">
<span class="cP12"><span style=" font-weight: bold; font-angle: normal; vertical-align: baseline; color:#000000;">wait_for_interrupt_end ()</span></span>

</p>


<a name="wp30339"></a><p class="pTableCell">
Called when a SLEEP mode is finished. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30117"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30345"></a><p class="pTableCell">
<span style=" font-weight: bold;">lt_callback</span> (uint32_t expired_cycles)

</p>


<a name="wp30346"></a><p class="pTableCell">
Called when an LT synchronization occurs. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30095"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30352"></a><p class="pTableCell">
<span style=" font-weight: bold;">at_callback</span> (uint64_t pc_addr, unsigned code_block_size)

</p>


<a name="wp30353"></a><p class="pTableCell">
Called when an AT synchronization occurs. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30099"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30359"></a><p class="pTableCell">
<span style=" font-weight: bold;">instruction</span> (uint64_t pc_addr, const char *insn_mnemonics, const sc_core::sc_time &amp;annotate)

</p>


<a name="wp30360"></a><p class="pTableCell">
Called when an instruction is executed by the code. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30103"></a><p class="pTableCell">
virtual

</p>

</td>

    <td>


<a name="wp30366"></a><p class="pTableCell">
<span class="cP12"><span style=" font-weight: bold; font-angle: normal; vertical-align: baseline; color:#000000;">~trace ()</span></span>

</p>

</td>


</tr>


</table>

</div>
<div id='EndTable'> </div>
<p class="pBody">
<br clear='left' class='Blank4Table' />


</p>


<a name="wp27942"></a><p class="pBody">
For a complete functional description refer to the core control reference manual which can be found under the Vista documentation in: <span class="cReqRpl">vista_installation_directory</span><span style=" font-weight: regular; font-style: italic;">\docs\model_builder\apirefs\html\classmb_1_1qemu_1_1core__b_1_1trace.html</span>
</p>


<a name="wp27945"></a><p class="pBody">
For a usage example refer to <a href='javascript:oT("CRF","Chapter_Customizing_Gen_Models_new57.html");'>Trace API Example</a> section.
</p>

<a name="MGCCIDPTracing ISS Instructions"></a>

<a name="wp164820"></a><h5 class="pHeading4">
  


Tracing ISS Instructions
</h5>



<a name="wp164826"></a><p class="pBody">
The Vista program provides multiple methods to trace a QEMU based core and print its executed instructions: verbosity parameter, Trace API, software semi-hosting, and debugger monitor commands.
</p>


<a name="wp165077"></a><p class="pBody">
By default instructions are displayed in hex format. To view corresponding mnemonics and arguments, use the <span style=" font-style: italic;">libmnemonics.a</span> package that provides a special API with appropriate external package. To obtain the <span style=" font-style: italic;">libmnemonics.a </span>package and usage instruction, contact Vista customer support.
</p>

<a name="MGCCIDPUsing Core Debug Verbosity"></a>

<a name="wp164827"></a><h6 class="pHeading5">
  


Using Core Debug Verbosity
</h6>



<a name="wp164946"></a><p class="pBody">
The core model provides several informative debug messages. The verbosity level and category are controlled by the hardware model through the relevant configuration file (for example, <span style=" font-style: italic;">parameters.txt</span>) or through the software running on the ISS.
</p>


<a name="wp164828"></a><p class="pBody">
To control the verbosity level and type of the required debug information use the core verbose parameters as listed in <a href='javascript:oT("CRF","Chapter_Customizing_Gen_Models_new26.html#wp27852");'>Core Debug Verbosity</a> or any OR'd combination of them. 
</p>


<a name="wp164981"></a><p class="pBody">
For example, you can use the INSTRUCTIONS parameter by adding the following line in your parameters.txt file. The INSTRUCTIONS parameter prints a message on each instruction which is executed. 
</p>


<a name="wp164834"></a><pre class="pCode">        top.cpu0.PV.core.verbose = INSTRUCTIONS</pre>


<a name="wp164993"></a><pre class="pCode">     </pre>

<a name="MGCCIDPUsing Core Trace API"></a>

<a name="wp164835"></a><h6 class="pHeading5">
  


Using Core Trace API
</h6>



<a name="wp164836"></a><p class="pBody">
The core models offered by Vista provide an enhanced tracing mechanism, <a href='javascript:oT("CRF","Chapter_Customizing_Gen_Models_new26.html#wp27906");'>Core Tracing API</a>, that enables you to use a pre-defined set of callbacks on significant core events. 
</p>


<a name="wp165025"></a><p class="pBody">
For example, you can receive a callback when the core has initiated a read transaction, or each time the core has entered sleep mode. The following callback can be monitored (called) when an instruction is executed by the code:
</p>


<a name="wp164839"></a><pre class="pCode">     virtual void instruction (uint64_t pc, uint64 opcode, unsigned size, const sc_core::sc_time &amp;annotate)</pre>


<a name="wp165039"></a><pre class="pCode">     </pre>

<a name="MGCCIDPUsing Semi-Hosting"></a>

<a name="wp164840"></a><h6 class="pHeading5">
  


Using Semi-Hosting
</h6>



<a name="wp164841"></a><p class="pBody">
Vista QEMU based cores provide semi-hosting and various simulation control APIs.
</p>


<a name="wp164842"></a><p class="pBody">
For example, the semi-hosting functions mb_core_set_verbose_mode and mb_core_get_verbose_mode can be used with the value MB_CORE_VERBOSE_INSTRUCTIONS to print a message when each instruction is executed.
</p>

<a name="MGCCIDPUsing Target Debugger MON Command"></a>

<a name="wp164843"></a><h6 class="pHeading5">
  


Using Target Debugger MON Command
</h6>



<a name="wp164844"></a><p class="pBody">
The following monitor (Mon) command can be issued from Mentor Codebench Software debugger tool.
</p>


<a name="wp164845"></a><p class="pApplCmd">
mon core set-verbose STRING  
</p>


<a name="wp164846"></a><p class="pBody">
STRING is an OR'd list of literals (for example: INSTRCTIONS or READ), as defined in <a href='javascript:oT("CRF","Chapter_Customizing_Gen_Models_new26.html#wp27852");'>Core Debug Verbosity</a>.
</p>

<a name="MGCCIDPCache Configuration Parameters"></a>

<a name="wp27981"></a><h5 class="pHeading4">
  


Cache Configuration Parameters
</h5>



<a name="wp27982"></a><p class="pBody">
For processors which instantiate cache models, the following parameters configure the cache characteristics: 
</p>


<a name="wp27983"></a>
<ul><li class="LL1BulSolid">read_latency - latency of a read cache hit (sc_time)</li></ul>
<a name="wp27984"></a>
<ul><li class="LL1BulSolid">write_latency - latency of a write cache hit (sc_time)</li></ul>
<a name="wp27985"></a>
<ul><li class="LL1BulSolid">line_size - size of any cache line bytes, default </li></ul>
<a name="wp27986"></a>
<ul><li class="LL1BulSolid">associativity - cache associativity, number of lines per set.</li></ul>
<a name="wp27987"></a>
<ul><li class="LL1BulSolid">write_hit_policy - Defines the write hit policy either WRITE_BACK or WRITE_THROUGH</li></ul>
<a name="wp27988"></a>
<ul><li class="LL1BulSolid">write_miss_policy - defines the write miss policy, either ALLOC or NON_ALLOC</li></ul>
<a name="wp27989"></a>
<ul><li class="LL1BulSolid">read_miss_policy one of: defines the read miss policy one of ALLOC, NON_ALLOC</li></ul>
<a name="wp27991"></a>
<ul><li class="LL1BulSolid">replacement_policy - Cache replacement policy one of RANDOM, ROUND_ROBIN, PSEUDO_LRU, FULL_LRU</li></ul>
<a name="wp27992"></a>
<ul><li class="LL1BulSolid">lt_cache_miss_ratio - In LT where there is no cache modeling, controls approximate hit/miss ratio</li></ul>
<a name="wp27993"></a><p class="pBody">
Configuration example: 
</p>


<a name="wp27994"></a><pre class="pCode">     top.cpu0.icache_size = 16384</pre>


<a name="wp27995"></a><pre class="pCode">     top.cpu0.PV.icache.line_size = 32</pre>


<a name="wp27996"></a><pre class="pCode">     top.cpu0.PV.icache.associativity = 4</pre>


<a name="wp27997"></a><pre class="pCode">     top.cpu0.PV.icache.read_latency = 0 NS</pre>


<a name="wp27998"></a><pre class="pCode">     top.cpu0.PV.icache.write_latency = 0 NS</pre>


<a name="wp27999"></a><pre class="pCode">     top.cpu0.PV.icache.critical_word_first = NONE</pre>


<a name="wp28000"></a><pre class="pCode">     top.cpu0.PV.icache.write_hit_policy = WRITE_BACK</pre>


<a name="wp28001"></a><pre class="pCode">     top.cpu0.PV.icache.write_miss_policy = NON_ALLOC</pre>


<a name="wp28002"></a><pre class="pCode">     top.cpu0.PV.icache.replacement_policy = FULL_LRU</pre>


<a name="wp28003"></a><pre class="pCode">     top.cpu0.PV.icache.lt_cache_miss_ratio = 0.1</pre>


<a name="wp28004"></a><pre class="pCode">     top.cpu0.PV.icache.verbose = ALL</pre>


<a name="wp28005"></a><pre class="pCode">     </pre>


<a name="wp28006"></a><pre class="pCode">     top.cpu0.dcache_size = 16384 </pre>


<a name="wp28007"></a><pre class="pCode">     top.cpu0.PV.dcache.line_size = 32</pre>


<a name="wp28008"></a><pre class="pCode">     top.cpu0.PV.dcache.associativity = 4</pre>


<a name="wp28009"></a><pre class="pCode">     top.cpu0.PV.dcache.read_latency = 0 NS</pre>


<a name="wp28010"></a><pre class="pCode">     top.cpu0.PV.dcache.write_latency = 0 NS</pre>


<a name="wp28011"></a><pre class="pCode">     top.cpu0.PV.dcache.critical_word_first = NONE</pre>


<a name="wp28012"></a><pre class="pCode">     top.cpu0.PV.dcache.write_hit_policy = WRITE_BACK</pre>


<a name="wp28013"></a><pre class="pCode">     top.cpu0.PV.dcache.write_miss_policy = ALLOC</pre>


<a name="wp28014"></a><pre class="pCode">     top.cpu0.PV.dcache.replacement_policy = FULL_LRU</pre>


<a name="wp28015"></a><pre class="pCode">     top.cpu0.PV.dcache.lt_cache_miss_ratio = 0.1</pre>


<a name="wp28016"></a><pre class="pCode">     top.cpu0.PV.dcache.verbose = ALL</pre>

<a name="MGCCIDPCache Verbosity"></a>

<a name="wp28018"></a><h6 class="pHeading5">
  


Cache Verbosity
</h6>



<a name="wp28019"></a><p class="pBody">
The cache model provides various printouts which provide debug information, you can control the verbosity level and the type of the required information, the following options are provided:
</p>


<a name="wp28021"></a>
<ul><li class="LL1BulSolid">READ_HIT - A message is printed each time there is a cache read hit</li></ul>
<a name="wp28022"></a>
<ul><li class="LL1BulSolid">READ MISS - A message is printed each time there is a cache read miss</li></ul>
<a name="wp28023"></a>
<ul><li class="LL1BulSolid">WRITE_HIT - A message is printed each time there is a cache write hit</li></ul>
<a name="wp28024"></a>
<ul><li class="LL1BulSolid">WRITE_MISS - A message is printed each time there is a cache write miss</li></ul>
<a name="wp28025"></a>
<ul><li class="LL1BulSolid">HIT - A message is printed each time there is a cache hit (read or write)</li></ul>
<a name="wp28026"></a>
<ul><li class="LL1BulSolid">MISS - A message is printed each time there is a cache miss (read or write)</li></ul>
<a name="wp28027"></a>
<ul><li class="LL1BulSolid">READ - A message is printed each time there is a read from cache </li></ul>
<a name="wp28028"></a>
<ul><li class="LL1BulSolid">ALLOC - A message is printed each time a cache line is allocated </li></ul>
<a name="wp28029"></a>
<ul><li class="LL1BulSolid">DISCARD - A message is printed each time a cache line is discarded </li></ul>
<a name="wp28030"></a>
<ul><li class="LL1BulSolid">FLUSH - A message is printed each time a cache is flushed </li></ul>
<a name="wp28031"></a>
<ul><li class="LL1BulSolid">CONTROL - A message is printed each time a cache control parameter is changed.</li></ul>
<a name="wp28032"></a>
<ul><li class="LL1BulSolid">ALL</li></ul>
<a name="wp28034"></a><p class="pBody">
Configuration example: 
</p>


<a name="wp28035"></a><pre class="pCode">     top.cpu0.PV.dcache.verbose = (DISCARD | MISS)</pre>


<a name="wp28036"></a><pre class="pCode">     top.cpu0.PV.icache.verbose = ALL</pre>

<a name="MGCCIDPCache Trace API"></a>

<a name="wp28040"></a><h6 class="pHeading5">
  


Cache Trace API
</h6>



<a name="wp28041"></a><p class="pBody">
The cache models offered by Vista ISS provide an enhanced tracing mechanism in which you may use a pre defined set of callbacks on any state transition through the cache state machine. For instance, you can create a callback each time the cache is being flushed, or any time a cache write miss has occurred.
</p>


<a name="wp28042"></a><p class="pBody">
Normally the Cache Trace API functionality is used for advanced statistical information gathering, and for advanced debug purposes. 
</p>





<a name="wp28044"></a><p class="pFigureTitle">
Figure 8&#8209;9. 


Cache State Machine


</p>
<div align="center"><img src="images/CacheStateMachine.gif" id="wp30993" border="0" hspace="0" vspace="0"/></div><p class="pFigureTitle">





</p>



<a name="wp28046"></a><p class="pBody">
The following callbacks are available by the cache Trace API:
</p>
<div id="TableDivQz"></div>
<div align="center">


<a name="wp30455"></a><p class="pTableTitle">
Table 8&#8209;10. 


Cache Trace API&#160;
</p>



<table border="1" cellpadding="5" cellspacing="0" id="wp30455table30453">
  <tr align="left" valign="top">
    <td>


<a name="wp30463"></a><p class="pTableCell">
virtual void
</p>
</td>

    <td>


<a name="wp30618"></a><p class="pTableCell">
<span style=" font-weight: bold;">init</span> (const <span style=" font-weight: bold;">cache_config</span> &amp;config)

</p>


<a name="wp30619"></a><p class="pTableCell">
Initialization sequence - called once. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30468"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30625"></a><p class="pTableCell">
<span style=" font-weight: bold;">read_hit</span> (uint64_t address, unsigned line)

</p>


<a name="wp30626"></a><p class="pTableCell">
Called on every read hit event. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30473"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30632"></a><p class="pTableCell">
<span style=" font-weight: bold;">write_hit</span> (uint64_t address, unsigned line)

</p>


<a name="wp30633"></a><p class="pTableCell">
Called on every write hit event. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30478"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30639"></a><p class="pTableCell">
<span style=" font-weight: bold;">read_miss</span> (uint64_t address)

</p>


<a name="wp30640"></a><p class="pTableCell">
Called on every read miss event. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30483"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30646"></a><p class="pTableCell">
<span style=" font-weight: bold;">write_miss</span> (uint64_t address)

</p>


<a name="wp30647"></a><p class="pTableCell">
Called on every write miss event. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30488"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30653"></a><p class="pTableCell">
<span style=" font-weight: bold;">alloc_line</span> (unsigned line, uint64_t new_address)

</p>


<a name="wp30654"></a><p class="pTableCell">
Called when a line (specified by global line number) is allocated and assigned to the specified aligned address. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30493"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30660"></a><p class="pTableCell">
<span style=" font-weight: bold;">discard_line</span> (unsigned line)

</p>


<a name="wp30661"></a><p class="pTableCell">
Called when a line is discarded from the cache. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30498"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30667"></a><p class="pTableCell">
<span style=" font-weight: bold;">flush_line</span> (unsigned line, uint64_t address)

</p>


<a name="wp30668"></a><p class="pTableCell">
Called when a line is being written to RAM. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30503"></a><p class="pTableCell">
virtual void

</p>

</td>

    <td>


<a name="wp30674"></a><p class="pTableCell">
<span style=" font-weight: bold;">control_cmd</span> (<span style=" font-weight: bold;">mb::tlm20::cache_cmd</span> cmd, uint64_t addr)

</p>


<a name="wp30675"></a><p class="pTableCell">
Called when an explicit control command is executed. 

</p>

</td>


</tr>

  <tr align="left" valign="top">
    <td>


<a name="wp30533"></a><p class="pTableCell">
virtual

</p>

</td>

    <td>


<a name="wp30535"></a><p class="pTableCell">
<span style=" font-weight: bold;">~trace ()</span>

</p>

</td>


</tr>


</table>

</div>
<div id='EndTable'> </div>
<p class="pBody">
<br clear='left' class='Blank4Table' />


</p>


<a name="wp28069"></a><p class="pBody">
For a complete functional description, refer to the cache control reference manual which can be found under the Vista documentation.
</p>


<a name="wp28070"></a><p class="pBody">
<span class="cP12"><span style=" font-weight: regular; font-style: italic; vertical-align: baseline; color:#000000;">(</span></span><span class="cP12"><span style=" font-weight: regular; font-style: italic; vertical-align: baseline; color:#000000;">vista installation directory<br /></span></span><span class="cP12"><span style=" font-weight: regular; font-style: italic; vertical-align: baseline; color:#000000;">/docs/model_builder/apirefs/html/classmb_1_1models_1_1cache__b_1_1trace.html)</span></span>
</p>




<script type="text/javascript" language="JavaScript1.2">
<!--
   PageTitle = "QEMU Processors Features";
   PDFLinkTitle = "QEMU.Processors.Features"
   ThisTopic = "FIGURECacheStateMachine";
   CurrentFile = "Chapter_Customizing_Gen_Models_new26.html";
   MGCSetDocumentVariables();
   MGCUpdateNavPane();
      MGCInsertRTFooter();
 // -->
 </script>



  </body>
</html>
